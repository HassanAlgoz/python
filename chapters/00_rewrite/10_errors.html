<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ar" xml:lang="ar" dir="rtl"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.31">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="مدخل عملي لتعلم البرمجة بلغة بايثون. كتاب موجه للمبتدئين في البرمجة من خلفيات تقنية أو غير تقنية، يعرض المفاهيم الأساسية بلغة واضحة، بتسلسل منطقي، مع مسائل واقعية وتطبيقات نافعة، بعيدًا عن العشوائية والسطحية. يصلح للتعلم الذاتي، وللتدريس كذلك">

<title>10&nbsp; الخطأ – البايثونية</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../chapters/02_numbers/problems.html" rel="next">
<link href="../../chapters/00_rewrite/09_time.html" rel="prev">
<link href="../../favicon.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-e1a5c8363afafaef2c763b6775fbf3ca.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-81c45c98caf4abd5206f796100e44dec.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="../../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "لا يوجد نتائج",
    "search-matching-documents-text": "الصفحات المطابقة",
    "search-copy-link-title": "نسخ الرابط إلى الحافظة",
    "search-hide-matches-text": "إخفاء المطابقات الإضافية",
    "search-more-match-text": "مطابقة واحدة في هذه الصفحة",
    "search-more-matches-text": "مطابقات إضافية في هذه الصفحة",
    "search-clear-button-title": "إزالة",
    "search-text-placeholder": "ابحث عن...",
    "search-detached-cancel-button-title": "إلغاء",
    "search-submit-button-title": "إرسال",
    "search-label": "البحث"
  }
}</script>
<meta name="mermaid-theme" content="neutral">
<script src="../../site_libs/quarto-diagram/mermaid.min.js"></script>
<script src="../../site_libs/quarto-diagram/mermaid-init.js"></script>
<link href="../../site_libs/quarto-diagram/mermaid.css" rel="stylesheet">


<meta name="twitter:title" content="10&nbsp; الخطأ – البايثونية">
<meta name="twitter:description" content="مدخل عملي لتعلم البرمجة بلغة بايثون. كتاب موجه للمبتدئين في البرمجة من خلفيات تقنية أو غير تقنية، يعرض المفاهيم الأساسية بلغة واضحة، بتسلسل منطقي، مع مسائل واقعية وتطبيقات نافعة، بعيدًا عن العشوائية والسطحية. يصلح للتعلم الذاتي، وللتدريس كذلك">
<meta name="twitter:image" content="https://hassanalgoz.github.io/python/assets/save_ascii_arabic.png">
<meta name="twitter:image:alt" content="برنامج نوتباد في وندوز بكلام عربي يظهر بشكل استفهامات">
<meta name="twitter:image-height" content="552">
<meta name="twitter:image-width" content="698">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="تبديل القائمة الجانبية" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../chapters/00_rewrite/10_errors.html"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">الخطأ</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="تبديل القائمة الجانبية" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="البحث" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../../">البايثونية</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/hassanalgoz/python/tree/main/book/" title="الكود المصدر" class="quarto-navigation-tool px-1" aria-label="الكود المصدر"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="المشاركة" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" role="link" aria-label="المشاركة"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=|url|">
              <i class="bi bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
              <i class="bi bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
      </ul>
    </div>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="البحث"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">مقدمة</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../setup.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">إعداد بيئة التطوير</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/00_rewrite/01_instructions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">النص البرمجي</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/00_rewrite/02_control_flow.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">توالي الأوامر</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/00_rewrite/03_functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">الدالة</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/00_rewrite/04_sequences.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">التسلسل</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/00_rewrite/05_computer_and_world.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">الحاسب والعالم</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/00_rewrite/06_text_files.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">الملفات النصية</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/00_rewrite/07_regex.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">التعبير النمطي</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/00_rewrite/08_objects.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">الكائنات</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/00_rewrite/09_time.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">الوقت</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/00_rewrite/10_errors.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">الخطأ</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false">
 <span class="menu-text">مسائل موضوعية</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false" aria-label="تبديل القسم">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/02_numbers/problems.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">في الأرقام</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/02_numbers/solutions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">حل المسائل</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/03_control_flow/problems.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">في الشرط والتكرار</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/03_control_flow/solutions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">حل المسائل</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/05_sequences/problems.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">في الجمع المرتب</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/05_sequences/solutions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">حل المسائل</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/06_mapping/c_problems.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">في الجمع المرقَّم</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false">
 <span class="menu-text">مسائل مفتوحة</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false" aria-label="تبديل القسم">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/apps/random_problem.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">شبه العشوائية</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/apps/sentiment_analysis_problem.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">تحليل المشاعر</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/apps/sentiment_analysis_solution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">الحل</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/apps/ceasar_cipher_problem.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">التشفير</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false">
 <span class="menu-text">الملحقات</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false" aria-label="تبديل القسم">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/02_numbers/a_numbers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">الأرقام</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/02_numbers/apps.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">تطبيقات في الأرقام</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/03_control_flow/control_flow.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">توالي الأوامر</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/03_control_flow/apps.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">D</span>&nbsp; <span class="chapter-title">تطبيقات في توالي الأوامر</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/08_procedural/a1_functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">E</span>&nbsp; <span class="chapter-title">الدالة</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/05_sequences/a_sequences.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">F</span>&nbsp; <span class="chapter-title">التسلسل</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/05_sequences/apps.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">G</span>&nbsp; <span class="chapter-title">تطبيقات في التسلسل</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/06_mapping/a1_set.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">H</span>&nbsp; <span class="chapter-title">المجموعة</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/06_mapping/a2_dict.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">I</span>&nbsp; <span class="chapter-title">القاموس</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/06_mapping/b_apps.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">J</span>&nbsp; <span class="chapter-title">تطبيقات في القاموس</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/07_strings/a1_strings.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">K</span>&nbsp; <span class="chapter-title">النص</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/07_strings/a2_unicode.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">L</span>&nbsp; <span class="chapter-title">ترميز الحروف</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/07_strings/regex.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">M</span>&nbsp; <span class="chapter-title">التعبير النمطي</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/09_files_and_directories/a1_file_io.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">N</span>&nbsp; <span class="chapter-title">الملفات</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/11_oop/a1_oop.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">O</span>&nbsp; <span class="chapter-title">البرمجة الكائنية</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../appendix/appendix_collections.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">P</span>&nbsp; <span class="chapter-title">خريطة الجُمُوع</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">المحاور</h2>
   
  <ul>
  <li><a href="#أولا-الخطأ-النحوي" id="toc-أولا-الخطأ-النحوي" class="nav-link active" data-scroll-target="#أولا-الخطأ-النحوي">أولاً: الخطأ النحوي</a></li>
  <li><a href="#ثانيا-الخطأ-المنطقي" id="toc-ثانيا-الخطأ-المنطقي" class="nav-link" data-scroll-target="#ثانيا-الخطأ-المنطقي">ثانياً: الخطأ المنطقي</a></li>
  <li><a href="#الاحتراز-من-الخطأ-المنطقي" id="toc-الاحتراز-من-الخطأ-المنطقي" class="nav-link" data-scroll-target="#الاحتراز-من-الخطأ-المنطقي">الاحتراز من الخطأ المنطقي</a></li>
  <li><a href="#تجويد-العبارة" id="toc-تجويد-العبارة" class="nav-link" data-scroll-target="#تجويد-العبارة">تجويد العبارة</a></li>
  <li><a href="#ثالثا-الخطأ-التشغيلي" id="toc-ثالثا-الخطأ-التشغيلي" class="nav-link" data-scroll-target="#ثالثا-الخطأ-التشغيلي">ثالثاً: الخطأ التشغيلي</a></li>
  <li><a href="#كيف-نقرأ-رسالة-الخطأ" id="toc-كيف-نقرأ-رسالة-الخطأ" class="nav-link" data-scroll-target="#كيف-نقرأ-رسالة-الخطأ">كيف نقرأ رسالة الخطأ؟</a></li>
  <li><a href="#جملة-المحاولة-try-except" id="toc-جملة-المحاولة-try-except" class="nav-link" data-scroll-target="#جملة-المحاولة-try-except">جملة المحاولة (<code dir="ltr">try-except</code>)</a></li>
  <li><a href="#أنواع-الاستثناء" id="toc-أنواع-الاستثناء" class="nav-link" data-scroll-target="#أنواع-الاستثناء">أنواع الاستثناء</a>
  <ul class="collapse">
  <li><a href="#syntaxerror" id="toc-syntaxerror" class="nav-link" data-scroll-target="#syntaxerror">1. <code dir="ltr">SyntaxError</code></a></li>
  <li><a href="#typeerror" id="toc-typeerror" class="nav-link" data-scroll-target="#typeerror">2. <code dir="ltr">TypeError</code></a></li>
  <li><a href="#valueerror" id="toc-valueerror" class="nav-link" data-scroll-target="#valueerror">3. <code dir="ltr">ValueError</code></a></li>
  <li><a href="#indexerror-5.-keyerror" id="toc-indexerror-5.-keyerror" class="nav-link" data-scroll-target="#indexerror-5.-keyerror">4. <code dir="ltr">IndexError</code> &amp; 5. <code dir="ltr">KeyError</code></a></li>
  <li><a href="#attributeerror-7.-nameerror" id="toc-attributeerror-7.-nameerror" class="nav-link" data-scroll-target="#attributeerror-7.-nameerror">6. <code dir="ltr">AttributeError</code> &amp; 7. <code dir="ltr">NameError</code></a></li>
  <li><a href="#modulenotfounderror" id="toc-modulenotfounderror" class="nav-link" data-scroll-target="#modulenotfounderror">8. <code dir="ltr">ModuleNotFoundError</code></a></li>
  </ul></li>
  <li><a href="#قراءة-تسلسل-الاستدعاءات-إلى-الخطأ" id="toc-قراءة-تسلسل-الاستدعاءات-إلى-الخطأ" class="nav-link" data-scroll-target="#قراءة-تسلسل-الاستدعاءات-إلى-الخطأ">قراءة تسلسل الاستدعاءات إلى الخطأ</a></li>
  <li><a href="#تعريف-أخطاء-جديدة" id="toc-تعريف-أخطاء-جديدة" class="nav-link" data-scroll-target="#تعريف-أخطاء-جديدة">تعريف أخطاء جديدة</a></li>
  <li><a href="#الاحتراز-والاستجابة" id="toc-الاحتراز-والاستجابة" class="nav-link" data-scroll-target="#الاحتراز-والاستجابة">الاحتراز والاستجابة</a></li>
  <li><a href="#الفرق-بين-الاحتراز-والاستجابة" id="toc-الفرق-بين-الاحتراز-والاستجابة" class="nav-link" data-scroll-target="#الفرق-بين-الاحتراز-والاستجابة">الفرق بين: الاحتراز والاستجابة</a></li>
  <li><a href="#الحالة-الأولى-أن-يستوعبه-السياق" id="toc-الحالة-الأولى-أن-يستوعبه-السياق" class="nav-link" data-scroll-target="#الحالة-الأولى-أن-يستوعبه-السياق">الحالة الأولى: أن يستوعبه السياق</a>
  <ul class="collapse">
  <li><a href="#فإن-كان-خطأ-جديدا" id="toc-فإن-كان-خطأ-جديدا" class="nav-link" data-scroll-target="#فإن-كان-خطأ-جديدا">فإن كان خطأ جديدًا</a></li>
  <li><a href="#وإن-كان-خطا-مرفوعا" id="toc-وإن-كان-خطا-مرفوعا" class="nav-link" data-scroll-target="#وإن-كان-خطا-مرفوعا">وإن كان خطًا مرفوعًا</a></li>
  <li><a href="#الحالة-الثانية-ألا-يستوعبه-السياق" id="toc-الحالة-الثانية-ألا-يستوعبه-السياق" class="nav-link" data-scroll-target="#الحالة-الثانية-ألا-يستوعبه-السياق">الحالة الثانية: ألا يستوعبه السياق</a></li>
  </ul></li>
  <li><a href="#من-الخطأ-إلتقاط-جميع-الأخطاء" id="toc-من-الخطأ-إلتقاط-جميع-الأخطاء" class="nav-link" data-scroll-target="#من-الخطأ-إلتقاط-جميع-الأخطاء">من الخطأ إلتقاط جميع الأخطاء</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/hassanalgoz/python/issues/new" class="toc-action"><i class="bi bi-github"></i>الإبلاغ عن مشكلة</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">الخطأ</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>الخطأ في البرمجيات على نوعين:</p>
<ol type="1">
<li><strong>خطأ ظاهر</strong>: حيث تم برمجة مسار لكشفه؛ سواءٌ فيما كتبناه أو من المكتبة التي استعملناها أو في بايثون نفسها.</li>
<li><strong>خطأ خفي</strong>: عدم اعتبار جميع الاحتمالات في كل المسارات الممكنة للبرنامج. فهو ناتج عن نقص في السبر.</li>
</ol>
<section id="أولا-الخطأ-النحوي" class="level2">
<h2 class="anchored" data-anchor-id="أولا-الخطأ-النحوي">أولاً: الخطأ النحوي</h2>
<p>فمن الخطأ الظاهر: <strong>الخطأ النحوي</strong> (Syntactic Error): وهو الخطأ في مبنى اللغة؛ أي: مخالفة قواعدها وقوانينها.</p>
<p>مثال ذلك فقد النطقتين الرأسيتين (<code dir="ltr">:</code>) كفاصلة للجملة الشرطية.. كما سيظهر الخطأ الآن في هذه القطعة:</p>
<div id="faa2e804" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1" dir="ltr"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> x <span class="op">&gt;</span> <span class="dv">5</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"x"</span>)</span></code><button title="نسخ إلى الحافظة" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre>  <span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[1]</span><span class="ansi-green-fg">, line 1</span>
<span class="ansi-red-fg">    </span><span class="ansi-red-fg">if x &gt; 5</span>
            ^
<span class="ansi-red-fg">SyntaxError</span><span class="ansi-red-fg">:</span> expected ':'
</pre>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
ملاحظة
</div>
</div>
<div class="callout-body-container callout-body">
<p>كي تقرأ هذا الخطأ: انظر أولاً للسطر الأخير حيث كُتب <code dir="ltr">SyntaxError</code> فذاك نوع الخطأ. وكتب بعده تخصيص له، حيث قال: <code dir="ltr">expected ':'</code> .. أي: كان من المتوقع وجود <code dir="ltr">:</code> هنا. ثم انظر فوقه لتجد سهمًا صغيرًا يشير إلى المكان الذي يظن مفسر بايثون أن قد حصل فيه الخطأ الإملائي.</p>
</div>
</div>
<p>ومنه أيضًا عدم تطابق المسافاة البادئة للجمل ضمن القطعة الواحدة:</p>
<div id="e1070201" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2" dir="ltr"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">True</span>:</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"x"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>     <span class="bu">print</span>(<span class="st">'y'</span>)</span></code><button title="نسخ إلى الحافظة" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre>  <span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[2]</span><span class="ansi-green-fg">, line 3</span>
<span class="ansi-red-fg">    </span><span class="ansi-red-fg">print('y')</span>
    ^
<span class="ansi-red-fg">IndentationError</span><span class="ansi-red-fg">:</span> unexpected indent
</pre>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
ملاحظة
</div>
</div>
<div class="callout-body-container callout-body">
<p>نوع هذا الخطأ هو <code dir="ltr">IndentationError</code> وهو نوع من الخطأ الإملائي.</p>
</div>
</div>
</section>
<section id="ثانيا-الخطأ-المنطقي" class="level2">
<h2 class="anchored" data-anchor-id="ثانيا-الخطأ-المنطقي">ثانياً: الخطأ المنطقي</h2>
<p>وأما الخطأ الخفي فأساسه <strong>الخطأ المنطقي</strong> (Logical Error): وهو تعبيرٌ صحيحٌ نحويًّا لكنَّه لا يؤدي في الواقع إلى المقصود الذي أراده كاتبه منه. فالنية صحيحة لكن السهم أخطأ الهدف.</p>
<p>ومثال ذلك محاولة تفسير النص المكتوب بترميز مختلف عن الذي كُتِبَ به:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../../assets/save_ascii_arabic.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1" title="برنامج نوتباد في وندوز بكلام عربي يظهر بشكل استفهامات"><img src="../../assets/save_ascii_arabic.png" class="img-fluid figure-img" style="width:50.0%" alt="برنامج نوتباد في وندوز بكلام عربي يظهر بشكل استفهامات"></a></p>
<figcaption>برنامج نوتباد في وندوز بكلام عربي يظهر بشكل استفهامات</figcaption>
</figure>
</div>
<p>ومنه أيضًا: أن يريد المبرمج استعمال دالَّة التربيع (Square) فظنَّها <code dir="ltr">math.sqrt</code> لكن هذه (Square Root) أي: الجذر التربيعي. والصحيح أن يختار: <code dir="ltr">math.pow(4, 2)</code> لرفع <code dir="ltr">4</code> للقوة <code dir="ltr">2</code>.</p>
<div id="84562515" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3" dir="ltr"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> math</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>square <span class="op">=</span> math.sqrt(<span class="dv">4</span>)</span></code><button title="نسخ إلى الحافظة" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>وكذلك المعروف باسم “<strong>خطأ الحافَّة</strong>” (Off-by-one error)، ويكاد أن يكون أشهر الأخطاء الخفية المنطقية في البرمجة.</p>
<p>نشرحه بمثال: النية هنا هي طباعة الأرقام بالعكس من الرقم الأعلى (5) إلى (0) بما في ذلك (0)، ولكن الحلقة تتوقف عند (1). وذلك أن آلية عمل النطاق (<code dir="ltr">range</code>) عدم شمول النهاية.</p>
<div id="68bc6024" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb4" dir="ltr"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">5</span>, <span class="dv">0</span>, <span class="op">-</span><span class="dv">1</span>):</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(i, end<span class="op">=</span><span class="st">' '</span>)</span></code><button title="نسخ إلى الحافظة" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre dir="ltr"><code>5 4 3 2 1 </code></pre>
</div>
</div>
<p>والصحيح المطابق لنية الكاتب كان:</p>
<div id="d3fae360" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb6" dir="ltr"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">5</span>, <span class="op">-</span><span class="dv">1</span>, <span class="op">-</span><span class="dv">1</span>):</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(i, end<span class="op">=</span><span class="st">' '</span>)</span></code><button title="نسخ إلى الحافظة" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre dir="ltr"><code>5 4 3 2 1 0 </code></pre>
</div>
</div>
</section>
<section id="الاحتراز-من-الخطأ-المنطقي" class="level2">
<h2 class="anchored" data-anchor-id="الاحتراز-من-الخطأ-المنطقي">الاحتراز من الخطأ المنطقي</h2>
<p>وهي التي نقصدها حين نقول: <strong>بَق</strong> (Bug) بمعنى: <strong>مشكلة في البرنامج</strong>. ويسمى البرنامج الذي يساعد في إصلاح المشاكل البرمجية: <strong>المدقق</strong> (Debugger). وتسمى وعملية البحث عنها وإصلاحها: <strong>التدقيق</strong> (Debugging).</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../../assets/Sneaking.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2" title="الأخطاء المنطقية صامتة"><img src="../../assets/Sneaking.png" class="img-fluid figure-img" style="width:10.0%" alt="الأخطاء المنطقية صامتة"></a></p>
<figcaption>الأخطاء المنطقية صامتة</figcaption>
</figure>
</div>
<p><strong>الأخطاء المنطقية صامتة</strong>. إذ لا يكتشفها المترجم، وتتسبب في تصرف البرنامج بشكل غير صحيح. الأخطاء المنطقية هي الأصعب في التتبع والإصلاح لأنها ليست واضحة. يمكن أن تكون ناجمة عن:</p>
<ul>
<li>افتراضات غير صحيحة</li>
<li>خطوات غير مؤديَّة للمقصود</li>
</ul>
<p>لكونها جملاً صحيحة في ذاتها؛ لا يستطيع البرنامج كشف هذه الأخطاء لوحده. بل يجب على من يُدركُ حقيقة المطلوب من البرنامج أن يتكفل بذلك. وهنا تكون الحاجة ماسَّة <strong>لجمل التوكيد</strong>: <code dir="ltr">assert</code>.</p>
<p>و<strong>التدقيق</strong>؛ إذْ أفضل طريقة لحل الأخطاء المنطقية هي تنفيذ القطعة البرمجية والنظر في الناتج، وتتبع المنطق مرة أخرى إلى النص البرمجي سطرًا بسطر. يمكنك استخدام عبارات الطباعة <code dir="ltr">print</code> لتصحيح الأخطاء وفهم تدفق البرنامج. وقد يكون الأفضل من ذلك استعمال <a href="https://code.visualstudio.com/docs/python/debugging"><strong>المدقق</strong></a> (Debugger).</p>
<p>و<strong>مراجعة الأقران</strong>: بحيث يطلع على النص البرمجي شخص آخر، فإنه قد يرى منه ما تعذر عليك رؤيته. وقد يتم تنظيمه بين أعضاء الفريق الواحد بأحد برمجيات التعاون مثل: GitHub وGitLab وBitbucket وغيرها. لكن ليس شرطًا أن يكون بها حتى تستفيد منه.</p>
</section>
<section id="تجويد-العبارة" class="level2">
<h2 class="anchored" data-anchor-id="تجويد-العبارة">تجويد العبارة</h2>
<p>ومما يسهل الاحتراز من الأخطاء المنطقية: تجويد العبارة البرمجية.</p>
<p>ومن تجويد العبارة <strong>تسمية المتغيرات بما يدل على وظيفتها</strong>، مثل:</p>
<div id="0532ffc1" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb8" dir="ltr"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>rate <span class="op">=</span> <span class="dv">50</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>hours_per_day <span class="op">=</span> <span class="dv">6</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>days <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>pay <span class="op">=</span> rate <span class="op">*</span> hours_per_day <span class="op">*</span> days</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(pay)</span></code><button title="نسخ إلى الحافظة" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre dir="ltr"><code>1500</code></pre>
</div>
</div>
<p>وإن كان ليس من الخطأ النحوي كتابتها بطريقة مختلفة وبأسماء غير معبِّرة، إلا أنه فعلٌ غير مستحسن:</p>
<div id="ff41bcc1" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb10" dir="ltr"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>r, hpd, d <span class="op">=</span> <span class="dv">50</span>, <span class="dv">6</span>, <span class="dv">5</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>p <span class="op">=</span> r <span class="op">*</span> hpd <span class="op">*</span> d</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(p)</span></code><button title="نسخ إلى الحافظة" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre dir="ltr"><code>1500</code></pre>
</div>
</div>
<p>وفي هذا نصائح كثيرة، يراجع فيها <a href="https://peps.python.org/pep-0008/">دليل أسلوب الكتابة في بايثون</a>.</p>
</section>
<section id="ثالثا-الخطأ-التشغيلي" class="level2">
<h2 class="anchored" data-anchor-id="ثالثا-الخطأ-التشغيلي">ثالثاً: الخطأ التشغيلي</h2>
<p>ومن الخطأ الظاهر: <strong>الخطأ التشغيلي</strong> (Runtime Error)؛ أي الذي يصادَف أثناء عمل البرنامج. ويعبَّر عنه في عدة لغات باسم <strong>الاستثناء</strong> (Exception).</p>
<p><a href="https://docs.python.org/3.13/tutorial/errors.html"><strong>الاستثناء</strong></a> (Exception) هو إعلام بخروج البرنامج عن المسارات المعتادة إلى مسار لم تتم برمجته.</p>
<p>مثال ذلك:</p>
<ol type="1">
<li>أن يؤمَر بقراءة ملف .. والواقع أن هذا الملف غير موجود!</li>
<li>أو أن يطلب من المستخدم رقمًا فيعطيه كلاماً!</li>
<li>أو أن يطلب من الشبكة شيئًا .. فتنقطع الشبكة!</li>
</ol>
<p>فكل هذه تعتبر مسارات غير مثالية لكنها تحصل في ظروف واقعيَّة. فيجب كتابة قطع في البرنامج تتعامل معها. ولذا فإن بعض الممارسين لا يفضلون استعمال كلمة استثناء لأنَّ مثل ذلك يحصل كثيرًا فهو ليس خارجًا عن العادة؛ بل من الطبيعي أن يحصل ذلك في الواقع!</p>
<p>ولاحظ أننا في جميع الحالات السابقة نكشف الخطأ بفحص الحالة:</p>
<ol type="1">
<li>فأمر قراءة الملف يتضمن التحقق من وجوده؛ فإن لم يوجَد فإن الإجراء يقوم برفع استثناء</li>
<li>وأمر التحويل من النص إلى الرقم فيه أيضًا فحص للحروف التي في النص؛ فإن لم تكن قابلة للتحويل فإنه يرفع استثناء</li>
<li>وطلب شيء من الشبكة يتضمن توقيتًا لو تعداه ولم تحصل النتيجة؛ فإنه يتوقع أن ذلك بسبب انقطاع الشبكة، فيرفع استثناء</li>
</ol>
<p>لكننا غالبًا ما كنا نتعامل مع إجراءات من مكتبات، وهي التي ترفع الاستثناءات.</p>
<p>وقد يتبادر لذهنك أن الاستثناء ما هو إلا حالة تكون في جملة الرجوع <code dir="ltr">return</code>. فهذا المثال (وهو مثال غير صحيح) يوضِّح هذه الفكرة:</p>
<div class="sourceCode" id="cb12" dir="ltr"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> some_function():</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> some_condition:</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="pp">Exception</span>(<span class="st">"something went wrong"</span>)</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="st">"everything is fine"</span></span></code><button title="نسخ إلى الحافظة" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>وهذا صحيح في لغات برمجة أخرى غير بايثون؛ مثل: جو (Go) ورَسْت (Rust) وغيرها. لكن بايثون تشبه في هذا الأمر جافا (Java) وجافاسكريبت (JavaScript)، حيث تسمى رمي (<code dir="ltr">throw</code>) وأما في بايثون فتسمى <strong>رفع</strong> (<code dir="ltr">raise</code>) الاستثناءات.</p>
<p>وعملية <strong>الرفع</strong> (<code dir="ltr">raise</code>) مثل جملة الرجوع، إلا أنها تُجبِر الإجراء المستدعي على أحد خيارين:</p>
<ol type="1">
<li>أن يتعامل مع الاستثناء المرفوع</li>
<li>أن يكرر رفعه إلى من استدعاه هو</li>
</ol>
<p>أي أن هذه الآلية تجعل الاستثناء يرجع ويرجع إلى أن يصل لقطعة تتعامل معه، وإلا فإنه يخرج من البرنامج بالكلية فيتوقف. وهذه الحالة نسميها <strong>الانهيار</strong> (Crash)، وهي محمودة في الأغلب، إذْ قد يؤدي البرنامج إلى إيقاف الجهاز الذي يعمله عليه.</p>
<p>والشكل التالي يوضح أن الاستثناء يُرفع (<code dir="ltr">raise</code>) بعد التحقق (<code dir="ltr">if</code>) من حالة معيَّنة. فإن لم تحصل (<code dir="ltr">False</code>) هذه الحالة الخاطئة؛ فإن البرنامج يتم سيره:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../../assets/exception.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3" title="الاستثناء يُرفع (raise) بعد التحقق (if) من حالة معيَّنة"><img src="../../assets/exception.png" class="img-fluid figure-img" style="width:65.0%" alt="الاستثناء يُرفع (raise) بعد التحقق (if) من حالة معيَّنة"></a></p>
<figcaption>الاستثناء يُرفع (<code dir="ltr">raise</code>) بعد التحقق (<code dir="ltr">if</code>) من حالة معيَّنة</figcaption>
</figure>
</div>
<p>وإليك تمثيل هذه الصورة بقطعة بايثون:</p>
<div id="24ffa6ea" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb13" dir="ltr"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>some_condition <span class="op">=</span> <span class="va">True</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> f4():</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'f4'</span>)</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> f3():</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'f3:start'</span>)</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> some_condition:</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">raise</span> <span class="pp">Exception</span>(<span class="st">"something went wrong"</span>)</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    f4()            <span class="co"># &lt;-- لن يتم تنفيذ هذا السطر بسبب رفع الاستثناء</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'f3:end'</span>) <span class="co"># &lt;-- لن يتم تنفيذ هذا السطر بسبب رفع الاستثناء</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> f2():</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'f2:start'</span>)</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>        f3()</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span> <span class="pp">Exception</span> <span class="im">as</span> e:</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"Caught the exception:"</span>, e)</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"dealing with it..."</span>)</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>        <span class="co"># ... some logic to deal with the error ...</span></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'f2:end'</span>)</span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> f1():</span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'f1:start'</span>)</span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>    f2()</span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'f1:end'</span>)</span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> main():</span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"main:start"</span>)</span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a>    f1()</span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"main:end"</span>)</span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a>main()</span></code><button title="نسخ إلى الحافظة" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre dir="ltr"><code>main:start
f1:start
f2:start
f3:start
Caught the exception: something went wrong
dealing with it...
f2:end
f1:end
main:end</code></pre>
</div>
</div>
</section>
<section id="كيف-نقرأ-رسالة-الخطأ" class="level2">
<h2 class="anchored" data-anchor-id="كيف-نقرأ-رسالة-الخطأ">كيف نقرأ رسالة الخطأ؟</h2>
<p>وغالبًا تظهر لك رسالة خطأ (كبيرة أحيانًا) وذلك يحصل حين يُترَك ولا يلتقط بجملة <code dir="ltr">try-except</code> إذْ أن بايثون في تلك الحالة تقوم بالآتي:</p>
<ol type="1">
<li>وضع ملاحظات على سلسلة الاستدعاءات التي أدت إلى الخطأ
<ol type="1">
<li>اسم الملف</li>
<li>رقم السطر مع سهم يشير إليه</li>
</ol></li>
<li>إيقاف البرنامج</li>
<li>إظهار رسالة الخطأ</li>
</ol>
<p>فهذا نفس المثال، لكننا سنحذف <code dir="ltr">try-catch</code> لنترك الخطأ ليصعد إلى الأعلى:</p>
<div id="90faf5cd" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb15" dir="ltr"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>some_condition <span class="op">=</span> <span class="va">True</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> f4():</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'f4'</span>)</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> f3():</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'f3:start'</span>)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> some_condition:</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">raise</span> <span class="pp">Exception</span>(<span class="st">"something went wrong"</span>)</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>    f4()            <span class="co"># &lt;-- لن يتم تنفيذ هذا السطر بسبب رفع الاستثناء</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'f3:end'</span>) <span class="co"># &lt;-- لن يتم تنفيذ هذا السطر بسبب رفع الاستثناء</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> f2():</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'f2:start'</span>)</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>    f3()</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'f2:end'</span>)</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> f1():</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'f1:start'</span>)</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>    f2()</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'f1:end'</span>)</span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> main():</span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"main:start"</span>)</span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>    f1()</span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"main:end"</span>)</span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a>main()</span></code><button title="نسخ إلى الحافظة" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre dir="ltr"><code>main:start
f1:start
f2:start
f3:start</code></pre>
</div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">Exception</span>                                 Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[9]</span><span class="ansi-green-fg">, line 28</span>
<span class="ansi-green-fg">     25</span>     f1()
<span class="ansi-green-fg">     26</span>     <span style="color:rgb(0,135,0)">print</span>(<span class="ansi-yellow-fg">"</span><span class="ansi-yellow-fg">main:end</span><span class="ansi-yellow-fg">"</span>)
<span class="ansi-green-fg">---&gt; </span><span class="ansi-green-fg">28</span> <span class="ansi-yellow-bg">main</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">)</span>

<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[9]</span><span class="ansi-green-fg">, line 25</span>, in <span class="ansi-cyan-fg">main</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-fg">     23</span> <span style="font-weight:bold;color:rgb(0,135,0)">def</span> <span class="ansi-blue-fg">main</span>():
<span class="ansi-green-fg">     24</span>     <span style="color:rgb(0,135,0)">print</span>(<span class="ansi-yellow-fg">"</span><span class="ansi-yellow-fg">main:start</span><span class="ansi-yellow-fg">"</span>)
<span class="ansi-green-fg">---&gt; </span><span class="ansi-green-fg">25</span>     <span class="ansi-yellow-bg">f1</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">     26</span>     <span style="color:rgb(0,135,0)">print</span>(<span class="ansi-yellow-fg">"</span><span class="ansi-yellow-fg">main:end</span><span class="ansi-yellow-fg">"</span>)

<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[9]</span><span class="ansi-green-fg">, line 20</span>, in <span class="ansi-cyan-fg">f1</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-fg">     18</span> <span style="font-weight:bold;color:rgb(0,135,0)">def</span> <span class="ansi-blue-fg">f1</span>():
<span class="ansi-green-fg">     19</span>     <span style="color:rgb(0,135,0)">print</span>(<span class="ansi-yellow-fg">'</span><span class="ansi-yellow-fg">f1:start</span><span class="ansi-yellow-fg">'</span>)
<span class="ansi-green-fg">---&gt; </span><span class="ansi-green-fg">20</span>     <span class="ansi-yellow-bg">f2</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">     21</span>     <span style="color:rgb(0,135,0)">print</span>(<span class="ansi-yellow-fg">'</span><span class="ansi-yellow-fg">f1:end</span><span class="ansi-yellow-fg">'</span>)

<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[9]</span><span class="ansi-green-fg">, line 15</span>, in <span class="ansi-cyan-fg">f2</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-fg">     13</span> <span style="font-weight:bold;color:rgb(0,135,0)">def</span> <span class="ansi-blue-fg">f2</span>():
<span class="ansi-green-fg">     14</span>     <span style="color:rgb(0,135,0)">print</span>(<span class="ansi-yellow-fg">'</span><span class="ansi-yellow-fg">f2:start</span><span class="ansi-yellow-fg">'</span>)
<span class="ansi-green-fg">---&gt; </span><span class="ansi-green-fg">15</span>     <span class="ansi-yellow-bg">f3</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">     16</span>     <span style="color:rgb(0,135,0)">print</span>(<span class="ansi-yellow-fg">'</span><span class="ansi-yellow-fg">f2:end</span><span class="ansi-yellow-fg">'</span>)

<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[9]</span><span class="ansi-green-fg">, line 9</span>, in <span class="ansi-cyan-fg">f3</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-fg">      7</span> <span style="color:rgb(0,135,0)">print</span>(<span class="ansi-yellow-fg">'</span><span class="ansi-yellow-fg">f3:start</span><span class="ansi-yellow-fg">'</span>)
<span class="ansi-green-fg">      8</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> some_condition:
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">9</span>     <span style="font-weight:bold;color:rgb(0,135,0)">raise</span> <span style="font-weight:bold;color:rgb(215,95,95)">Exception</span>(<span class="ansi-yellow-fg">"</span><span class="ansi-yellow-fg">something went wrong</span><span class="ansi-yellow-fg">"</span>)
<span class="ansi-green-fg">     10</span> f4()            <span style="font-style:italic;color:rgb(95,135,135)"># &lt;-- لن يتم تنفيذ هذا السطر بسبب رفع الاستثناء</span>
<span class="ansi-green-fg">     11</span> <span style="color:rgb(0,135,0)">print</span>(<span class="ansi-yellow-fg">'</span><span class="ansi-yellow-fg">f3:end</span><span class="ansi-yellow-fg">'</span>)

<span class="ansi-red-fg">Exception</span>: something went wrong</pre>
</div>
</div>
</div>
<p>فيما يلي نتأمل رسالة الخطأ التي ظهرت..</p>
<p>فترى في أول قطعة <strong>الإجراء الذي بدأ ذلك التسلسل كله</strong> وهو <code dir="ltr">main</code>:</p>
<pre dir="ltr"><code>Exception                                 Traceback (most recent call last)
Cell In[18], line 28
     25     f1()
     26     print("main:end")
---&gt; 28 main()</code></pre>
<p>ثم بعد ذلك ترى <strong>كومة الاستدعاءات</strong> (Stack Trace) وفي أسفل ذلك كله، ترى <strong>السبب المباشر</strong> للخطأ:</p>
<pre dir="ltr"><code>Cell In[18], line 25, in main()
     23 def main():
     24     print("main:start")
---&gt; 25     f1()
     26     print("main:end")

Cell In[18], line 20, in f1()
     18 def f1():
     19     print('f1:start')
---&gt; 20     f2()
     21     print('f1:end')

Cell In[18], line 15, in f2()
     13 def f2():
     14     print('f2:start')
---&gt; 15     f3()
     16     print('f2:end')

Cell In[18], line 9, in f3()
      7 print('f3:start')
      8 if some_condition:
----&gt; 9     raise Exception("something went wrong")
     10 f4()
     11 print('f3:end')</code></pre>
<p>وأما السطر الأخير بعد ذلك كله، فإنه <strong>ملخص للخطأ</strong>، وهو أول ما يجب أن تقرأ:</p>
<ol type="1">
<li>النوع (مثل: <code dir="ltr">Exception</code> وهو أب جميع الأخطاء)</li>
<li>التفاصيل بلغة طبيعية (مثل: <code dir="ltr">something went wrong</code>)</li>
</ol>
<pre dir="ltr"><code>Exception: something went wrong</code></pre>
</section>
<section id="جملة-المحاولة-try-except" class="level2">
<h2 class="anchored" data-anchor-id="جملة-المحاولة-try-except">جملة المحاولة (<code dir="ltr">try-except</code>)</h2>
<p>تنفذ التعليمات في لغة البرمجة الأمرية (Imperative) كبايثون بحسب ترتيبها (من الأعلى إلى الأسفل). لكن عند حدوث خطأ، يتغيَّر سيْر الأوامر باستعمال جملة <code dir="ltr">try-except</code>. وشكل جملة التعامل مع الخطأ على هذا النحو:</p>
<ul>
<li><strong>المحاولة</strong>: <code dir="ltr">try</code> تتضمن الجملة التي نتوقع حدوث خطأٍ فيها</li>
<li><strong>حالة الخطأ</strong>: <code dir="ltr">except Exception</code> هي مثل <code dir="ltr">if</code> تنفذ ما تتضمنه إن كان الخطأ من نوع <code dir="ltr">Excpetion</code> (وهو أب جميع الأخطاء)
<ul>
<li>أما <code dir="ltr">e</code> فهو المتغير الذي يمثِّل تفاصيل الاستثناء إن وجدت؛ وعادة ما يكون رسالة نصيَّة تلخص الخطأ</li>
</ul></li>
<li><strong>حالة عدم الخطأ</strong>: <code dir="ltr">else</code> تعمل عند عدم الخطأ (وفي هذا المثال لن تعمل أبدًا لأننا نتوقع حدوث أي خطأ على الإطلاق)</li>
<li><strong>التعقيب</strong>: <code dir="ltr">finally</code> وهي جُملة تعمل سواء وقع الخطأ أم لم يقع؛ لكنَّ بايثون تضمن عملها إن حصل خطأ أثناء التعامل مع الخطأ</li>
</ul>
<div class="sourceCode" id="cb20" dir="ltr"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> do_something():</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'before'</span>)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>        <span class="co"># حاول تشغيل هذه القطعة</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span> <span class="pp">Exception</span> <span class="im">as</span> e:</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>        <span class="co"># إذا حدث خطأ من نوع Exception</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>        <span class="co"># فشغل هذه القطعة</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>        <span class="co"># وإن لم يحصل فهذه القعطة</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">finally</span>:</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>        <span class="co"># وشغل هذه على أية حال</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>        <span class="co"># سواءٌ حصل الخطأ أم لا</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>        <span class="co"># وفائدتها أنها تعمل قبل رجوع الخطأ لموضع النداء</span></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'after'</span>)</span></code><button title="نسخ إلى الحافظة" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="أنواع-الاستثناء" class="level2">
<h2 class="anchored" data-anchor-id="أنواع-الاستثناء">أنواع الاستثناء</h2>
<p>تم تعريف أنواع من الخطأ في بايثون متبوعة بكلمة <code dir="ltr">Error</code> (عُرفًا)، وذلك باعتبار حالات خطأ نمطية ومتكررة:</p>
<section id="syntaxerror" class="level3">
<h3 class="anchored" data-anchor-id="syntaxerror">1. <code dir="ltr">SyntaxError</code></h3>
<p><strong>السبب</strong>: خطأ نحوي في صياغة اللغة:</p>
<ul>
<li>كلمة غير صحيحة: خطأ في الإملاء</li>
<li>في وضع كلمة صحيحة في غير سياقها</li>
<li>محاذاة غير متسقة (<code dir="ltr">IndentationError</code>)</li>
</ul>
<p>مثال:</p>
<div id="9700cfcb" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb21" dir="ltr"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> x <span class="op">&gt;</span> <span class="dv">5</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"x"</span>)</span></code><button title="نسخ إلى الحافظة" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre>  <span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[10]</span><span class="ansi-green-fg">, line 1</span>
<span class="ansi-red-fg">    </span><span class="ansi-red-fg">if x &gt; 5</span>
            ^
<span class="ansi-red-fg">SyntaxError</span><span class="ansi-red-fg">:</span> expected ':'
</pre>
</div>
</div>
</div>
<p><strong>الحل</strong>: اقرأ رسالة الخطأ وستدلُّك على السبب والموضع الذي حصل فيه الخطأ.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
ملاحظة
</div>
</div>
<div class="callout-body-container callout-body">
<p>في الواقع هذا ليس من الأخطاء التشغيلية، بل هو خطأ نحوي / إملائي. ويمكن ضبط المحرر كي يكشفها لك قبل تشغيل البرنامج أصلاً.</p>
</div>
</div>
</section>
<section id="typeerror" class="level3">
<h3 class="anchored" data-anchor-id="typeerror">2. <code dir="ltr">TypeError</code></h3>
<p><strong>السبب</strong>:</p>
<ol type="1">
<li>طلب فعل بعدد أكثر أو أقل من العوامل الواجبة (مثل: <code dir="ltr">len(1, 2)</code>)</li>
<li>طلب فعل بعوامل لا تطابق النوع المحدد في تعريفه (مثل: <code dir="ltr">math.sqrt('nine')</code> أو <code dir="ltr">5 + '5'</code>)</li>
</ol>
<p><strong>الحل</strong>: الاحتراز بفحص النوع عن طريق الإجراء <code dir="ltr">type()</code> أو <code dir="ltr">isinstance()</code> أو بالتأكد من تحويل النوع مسبقًا.</p>
<p>مثال:</p>
<div class="sourceCode" id="cb22" dir="ltr"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> <span class="bu">input</span>(<span class="st">'Enter a number: '</span>)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> a <span class="op">+</span> <span class="bu">int</span>(b)</span></code><button title="نسخ إلى الحافظة" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="f0de1c6d" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb23" dir="ltr"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> <span class="op">+</span> <span class="st">'5'</span></span></code><button title="نسخ إلى الحافظة" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">TypeError</span>                                 Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[11]</span><span class="ansi-green-fg">, line 1</span>
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">1</span> <span class="ansi-green-fg ansi-yellow-bg">5</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">+</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-fg ansi-yellow-bg">'</span><span class="ansi-yellow-fg ansi-yellow-bg">5</span><span class="ansi-yellow-fg ansi-yellow-bg">'</span>

<span class="ansi-red-fg">TypeError</span>: unsupported operand type(s) for +: 'int' and 'str'</pre>
</div>
</div>
</div>
<p>ستجد الخلاصة في السطر الأخير:</p>
<ul>
<li>نوع الخطأ: <code dir="ltr">TypeError</code></li>
<li>التفصيل: نوع المعطيات لعملية الجمع (<code dir="ltr">+</code>) غير متوافقة؛ وهي: العدد (<code dir="ltr">int</code>) والنص (<code dir="ltr">str</code>). ولاحظ أنه ذكر نوع العدد (<code dir="ltr">int</code>) لأنه قبله في ترتيب الكتابة.</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
ملاحظة
</div>
</div>
<div class="callout-body-container callout-body">
<p>يمكن تفادي هذا النوع من الأخطاء باستعمال أدوات مثل <a href="https://mypy.readthedocs.io/en/latest/cheat_sheet_py3.html">mypy</a>. لكن لا يتسع المقام لذكرها هنا.</p>
</div>
</div>
</section>
<section id="valueerror" class="level3">
<h3 class="anchored" data-anchor-id="valueerror">3. <code dir="ltr">ValueError</code></h3>
<p><strong>السبب</strong>: أن يكون النوع صحيحًا (فلا يحصُل <code dir="ltr">TypeError</code>) لكن القيمة غير مقبولة.</p>
<ul>
<li>مثلاً: طلب فعل بقيمة نوعها عددي لكنَّها سالبة وهو لا يقبل إلا الموجبة. نحو: <code dir="ltr">math.sqrt(-16)</code> فالجذر التربيعي لا يقبل السالب.</li>
</ul>
<p><strong>الحل</strong>: الاحتراز بفحص مدى القيمة قبل تنفيذ الأمر ، نحو:</p>
<div class="sourceCode" id="cb24" dir="ltr"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> x <span class="op">&gt;=</span> <span class="dv">0</span>:</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    math.sqrt(x)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># do something else</span></span></code><button title="نسخ إلى الحافظة" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="indexerror-5.-keyerror" class="level3">
<h3 class="anchored" data-anchor-id="indexerror-5.-keyerror">4. <code dir="ltr">IndexError</code> &amp; 5. <code dir="ltr">KeyError</code></h3>
<p><strong>السبب</strong>: الرقم الذي استعمل في عملية الإشارة <code dir="ltr">list[index]</code> (قائمة) أو <code dir="ltr">dict[key]</code> (قاموس) يشير لما هو خارج المجموعة. وهذا يؤدي إلى كوارث لو كان في لغة “غير آمنة” مثل سي (C) لأنها لا تتحقق من صحة المؤشر، إلا إذا فعلنا ذلك بأنفسنا. لكن في بايثون يتم كشف هذا الخطأ ورفعه حال وقوعه مباشرة، ونتعامل معه كاستثناء.</p>
<p>نحو:</p>
<div id="b560f6f1" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb25" dir="ltr"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>my_list <span class="op">=</span> [<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>]</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>idx <span class="op">=</span> <span class="dv">3</span></span></code><button title="نسخ إلى الحافظة" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="746507e3" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb26" dir="ltr"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>my_list[idx]</span></code><button title="نسخ إلى الحافظة" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">IndexError</span>                                Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[13]</span><span class="ansi-green-fg">, line 1</span>
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">1</span> <span class="ansi-yellow-bg">my_list</span><span class="ansi-yellow-bg">[</span><span class="ansi-yellow-bg">idx</span><span class="ansi-yellow-bg">]</span>

<span class="ansi-red-fg">IndexError</span>: list index out of range</pre>
</div>
</div>
</div>
<p>الحل: بأن نحترز باشتراط كون المؤشر لا يتعدى العنصر الأخير</p>
<div class="sourceCode" id="cb27" dir="ltr"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> idx <span class="op">&lt;</span> <span class="bu">len</span>(my_list):</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>    value <span class="op">=</span> my_list[idx]</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># do something else</span></span></code><button title="نسخ إلى الحافظة" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>أو بالاستجابة للاستثناء المرفوع:</p>
<div class="sourceCode" id="cb28" dir="ltr"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>:</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>    value <span class="op">=</span> my_list[idx]</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span> <span class="pp">IndexError</span>:</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># do something else</span></span></code><button title="نسخ إلى الحافظة" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>وكذلك في القاموس، نحو:</p>
<div id="f54120f9" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb29" dir="ltr"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>my_dict <span class="op">=</span> {<span class="st">'A'</span>: <span class="dv">10</span>, <span class="st">'B'</span>: <span class="dv">20</span>, <span class="st">'C'</span>: <span class="dv">30</span>}</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>key <span class="op">=</span> <span class="st">'Z'</span></span></code><button title="نسخ إلى الحافظة" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="c61d6f75" class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb30" dir="ltr"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>value <span class="op">=</span> my_dict[key]</span></code><button title="نسخ إلى الحافظة" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">KeyError</span>                                  Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[15]</span><span class="ansi-green-fg">, line 1</span>
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">1</span> value = <span class="ansi-yellow-bg">my_dict</span><span class="ansi-yellow-bg">[</span><span class="ansi-yellow-bg">key</span><span class="ansi-yellow-bg">]</span>

<span class="ansi-red-fg">KeyError</span>: 'Z'</pre>
</div>
</div>
</div>
<p>الحل: بالاحتراز بأن نشترط وجود المفتاح أصلاً في القاموس</p>
<div class="sourceCode" id="cb31" dir="ltr"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> key <span class="kw">in</span> my_dict:</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>    value <span class="op">=</span> my_dict[key]</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># do something else</span></span></code><button title="نسخ إلى الحافظة" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>أو هكذا (تعيين قيمة افتراضية عند العدم):</p>
<div class="sourceCode" id="cb32" dir="ltr"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>value <span class="op">=</span> my_dict.get(key, <span class="dv">0</span>)</span></code><button title="نسخ إلى الحافظة" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>أو بالاستجابة للاستثناء المرفوع:</p>
<div class="sourceCode" id="cb33" dir="ltr"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>:</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>    value <span class="op">=</span> my_dict[key]</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span> <span class="pp">KeyError</span>:</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># do something else</span></span></code><button title="نسخ إلى الحافظة" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="attributeerror-7.-nameerror" class="level3">
<h3 class="anchored" data-anchor-id="attributeerror-7.-nameerror">6. <code dir="ltr">AttributeError</code> &amp; 7. <code dir="ltr">NameError</code></h3>
<p><strong>السبب</strong>: استعمال متغير أو فعل قبل تعريفه.</p>
<ul>
<li>فإن أسنِد إلى كائن؛ رُفِع <code dir="ltr">AttributeError</code> (مثل: <code dir="ltr">a.x</code>)</li>
<li>وإلا رُفِع <code dir="ltr">NameError</code> (مثل: <code dir="ltr">X</code>)</li>
</ul>
<div id="aacebe7f" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb34" dir="ltr"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>a <span class="op">+</span> X</span></code><button title="نسخ إلى الحافظة" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[16]</span><span class="ansi-green-fg">, line 2</span>
<span class="ansi-green-fg">      1</span> a = <span class="ansi-green-fg">10</span>
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">2</span> a + <span class="ansi-yellow-bg">X</span>

<span class="ansi-red-fg">NameError</span>: name 'X' is not defined</pre>
</div>
</div>
</div>
<div id="d815e687" class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb35" dir="ltr"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>some_function(<span class="dv">55</span>)</span></code><button title="نسخ إلى الحافظة" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[17]</span><span class="ansi-green-fg">, line 1</span>
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">1</span> <span class="ansi-yellow-bg">some_function</span>(<span class="ansi-green-fg">55</span>)

<span class="ansi-red-fg">NameError</span>: name 'some_function' is not defined</pre>
</div>
</div>
</div>
<div id="3654f29c" class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb36" dir="ltr"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> A:</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">pass</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> A()</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>a.x</span></code><button title="نسخ إلى الحافظة" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">AttributeError</span>                            Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[18]</span><span class="ansi-green-fg">, line 5</span>
<span class="ansi-green-fg">      2</span>     <span style="font-weight:bold;color:rgb(0,135,0)">pass</span>
<span class="ansi-green-fg">      4</span> a = A()
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">5</span> <span class="ansi-yellow-bg">a</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">x</span>

<span class="ansi-red-fg">AttributeError</span>: 'A' object has no attribute 'x'</pre>
</div>
</div>
</div>
<div id="2d14efa1" class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb37" dir="ltr"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>a.do_something()</span></code><button title="نسخ إلى الحافظة" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">AttributeError</span>                            Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[19]</span><span class="ansi-green-fg">, line 1</span>
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">1</span> <span class="ansi-yellow-bg">a</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">do_something</span>()

<span class="ansi-red-fg">AttributeError</span>: 'A' object has no attribute 'do_something'</pre>
</div>
</div>
</div>
</section>
<section id="modulenotfounderror" class="level3">
<h3 class="anchored" data-anchor-id="modulenotfounderror">8. <code dir="ltr">ModuleNotFoundError</code></h3>
<p><strong>السبب</strong>: فشل جُملة الاستيراد <code dir="ltr">import numpy</code></p>
<p><strong>الحل</strong>:</p>
<ul>
<li>تأكد من صحة الإملاء</li>
<li>تأكد من تثبيت الوحدة في البيئة التي يعمل فيها البرنامج:
<ul>
<li>إذا كنت تستعمل <code dir="ltr">pip</code> فالأمر: <code dir="ltr">pip install numpy</code></li>
<li>إذا كنت تستعمل <code dir="ltr">uv</code> فالأمر: <code dir="ltr">uv add numpy</code> (وهو الذي ننصح به)</li>
</ul></li>
</ul>
</section>
</section>
<section id="قراءة-تسلسل-الاستدعاءات-إلى-الخطأ" class="level2">
<h2 class="anchored" data-anchor-id="قراءة-تسلسل-الاستدعاءات-إلى-الخطأ">قراءة تسلسل الاستدعاءات إلى الخطأ</h2>
</section>
<section id="تعريف-أخطاء-جديدة" class="level2">
<h2 class="anchored" data-anchor-id="تعريف-أخطاء-جديدة">تعريف أخطاء جديدة</h2>
<p>تعريف الخطأ يكون بتعريف نوع جديد يرث من النوع <code dir="ltr">Exception</code>، وهذا ما يحققه السطر الأول بين القوسين. وتستطيع أن ترث ممن يرث، فتتكون لديك فروع من هذا الخطأ:</p>
<div id="aa6392fe" class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb38" dir="ltr"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> ParentError(<span class="pp">Exception</span>):</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">pass</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> XError(ParentError):</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">pass</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> YError(ParentError):</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">pass</span></span></code><button title="نسخ إلى الحافظة" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<center>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart TD
    A[ParentError] --&gt; B[XError]
    A --&gt; C[YError]
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</center>
<p>وهذا الإجراء يحصل فيه الخطأ بطريقة مصطنعة لكنها توضح ما نريد، وهو الخطأ الفرعي <code dir="ltr">XError</code> الذي يرث من الخطأ الأصلي <code dir="ltr">ParentError</code>:</p>
<div id="783631f1" class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb39" dir="ltr"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> do_something():</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">raise</span> XError(<span class="st">'Something went wrong'</span>)</span></code><button title="نسخ إلى الحافظة" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>ثم حين نفحص، نستطيع أن نطابق بالأصل أو الفرع:</p>
<div id="724c06cf" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb40" dir="ltr"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>:</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>    do_something()</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span> ParentError <span class="im">as</span> e:</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"caught you:"</span>, e)</span></code><button title="نسخ إلى الحافظة" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre dir="ltr"><code>caught you: Something went wrong</code></pre>
</div>
</div>
</section>
<section id="الاحتراز-والاستجابة" class="level2">
<h2 class="anchored" data-anchor-id="الاحتراز-والاستجابة">الاحتراز والاستجابة</h2>
<p>يهندس المبرمج الإجراءات بحيث تكون نتيجة كل واحدٍ منها مبنيًّا على معطياته المباشرة؛ بحيث لو تم تمرير نفس المعطيات فإن نفس النتائج تخرج. فأن تقليل العوامل المؤثرة في كل خطوة يجعل التحقق من صحتها أسهل. ثم يتم تركيب البرنامج بمجموعها لتعمل جميع العوامل؛ وحينها نكون أقدر على التركيب الصحيح.</p>
<p>وذكرنا أن الإجراء له أحد أمرين لا ثالث لهما:</p>
<ol type="1">
<li><strong>المعالجة</strong>: أن يتعامل مع الاستثناء المرفوع؛ وذلك <strong>إن كان سياق الإجراء يسوعبه</strong>؛ أي: أن يكون في وعي الإجراء (في معطياته ومتغيراته) ما يمكن به معالجته.</li>
<li><strong>الرفع</strong>: أن يكرر رفعه إلى من استدعاه هو؛ وذلك <strong>حين لا يكون في سياق الإجراء ما يمكن به معالجته</strong> فيرفعه (يرجع به) للإجراء المستدعي له (الذي هو أكثرُ وَعيًا منه) ليعالجه.</li>
</ol>
<p>والرفع يتسلسل حتى يخرج من البرنامج؛ حيث يصل إلى الإنسان (سواءً المستفيد أو المبرمج): برسالة مفادها أمران:</p>
<ol type="1">
<li>العثور عليه</li>
<li>التعامل معه</li>
</ol>
<p>فأما <strong>حين يستوعبه السياق</strong>؛ فلدينا طريقتان لمعالجة الخطأ:</p>
<ol type="1">
<li><strong>الاحتراز</strong>: توقُّع حالات الخطأ والتحقق من عدمها قبل الإقدام على العملية.</li>
<li><strong>الاستجابة</strong>: ترك العملية لترجع بالخطأ؛ ثم نتعامل معه بحسبه.</li>
</ol>
</section>
<section id="الفرق-بين-الاحتراز-والاستجابة" class="level2">
<h2 class="anchored" data-anchor-id="الفرق-بين-الاحتراز-والاستجابة">الفرق بين: الاحتراز والاستجابة</h2>
<p>هذا الإجراء مسؤول عن تهيئة البرنامج، ومن خطواته أنه يقرأ ملف الضبط المخصص <code dir="ltr">custom_config.json</code>. وفي هذه الحالة قد يحصل خطأ. إذْ قد لا يكون الملف موجودًا أصلا!</p>
<div class="sourceCode" id="cb42" dir="ltr"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> initialize_program():</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ... code before</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">file</span> <span class="op">=</span> <span class="bu">open</span>(<span class="st">'custom_config.json'</span>)</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ... code after</span></span></code><button title="نسخ إلى الحافظة" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>ففي هذه الحالة يحصل استثناء من نوع <code dir="ltr">FileNotFoundError</code>.</p>
<p>فإذا اخترنا طريق <strong>الاحتراز</strong> فإننا أولاً نلتمس وجوده قبل فتحه. ونتعامل مع حالة الخطأ هذه (أي: عدمه)، بأن -مثلاً- نقرأ ملف الضبط الافتراضي <code dir="ltr">default.json</code> بدلاً من الملف المطلوب. والفرق بين هذا الملف والذي قبله أننا موقنون بوجوده، والأوَّل وجوده مظنون إذْ الذي يضعه هو المستخدم.</p>
<div class="sourceCode" id="cb43" dir="ltr"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> initialize_program():</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ... code before</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> os.path.exists(<span class="st">'custom_config.json'</span>):</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>        <span class="bu">file</span> <span class="op">=</span> <span class="bu">open</span>(<span class="st">'custom_config.json'</span>)</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>        <span class="bu">file</span> <span class="op">=</span> <span class="bu">open</span>(<span class="st">'default.json'</span>)</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ... code after</span></span></code><button title="نسخ إلى الحافظة" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>وقد تقول، حسنًا ماذا يكون لو عُدم ملف <code dir="ltr">default.json</code> أيضًا؟ فنقول: لا بأس أن يحصل خطأ يوقف البرنامج. إذْ ذاك يعتبر خطأ منطقيًّا يجب إصلاحه بإضافة الملف، وليس ثمة مجال لأن يصلحه النص البرمجي بنفسه .. وفي هذه الحالة؛ الأفضل أن نترك الخطأ ليتفاقم وينهار البرنامج فوْر وقوعه لنكتشفه ونصلحه.</p>
<p>أما <strong>الاستجابة</strong> فتكون بجملة <code dir="ltr">try-except</code> على النحو التالي:</p>
<div class="sourceCode" id="cb44" dir="ltr"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> initialize_program():</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ... code before</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>        <span class="bu">file</span> <span class="op">=</span> <span class="bu">open</span>(<span class="st">'custom_config.json'</span>)</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span> <span class="pp">FileNotFoundError</span>:</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>        <span class="bu">file</span> <span class="op">=</span> <span class="bu">open</span>(<span class="st">'default.json'</span>)</span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ... code after</span></span></code><button title="نسخ إلى الحافظة" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>ما هو الأفضل إذاً؟</p>
<p>أما استعمال الاحتراز ففيه شك بوجود <strong>فجوة زمنية</strong> بين عمليتي الإدراك والفعل. فالحاسب تتوارد عليه البرمجيات، ولا يستأثر به برنامج واحد. فإذا تغيَّر الحال في هذه الفجوة الزمنية (بعد إدراك وجود الملف .. تم حذفه) فعاد بالنقض على صواب الإدراك؛ لذلك تكون <strong>الاستجابة أضمن من الاحتراز فيما هو عُرضة <a href="https://ar.wikipedia.org/wiki/%D8%AD%D8%A7%D9%84%D8%A9_%D8%AA%D8%B3%D8%A7%D8%A8%D9%82">لحالة التسابق</a></strong>.</p>
</section>
<section id="الحالة-الأولى-أن-يستوعبه-السياق" class="level2">
<h2 class="anchored" data-anchor-id="الحالة-الأولى-أن-يستوعبه-السياق">الحالة الأولى: أن يستوعبه السياق</h2>
<section id="فإن-كان-خطأ-جديدا" class="level3">
<h3 class="anchored" data-anchor-id="فإن-كان-خطأ-جديدا">فإن كان خطأ جديدًا</h3>
<p>مثاله الاحتراز مما لو لم تكن إحدى الخصائص موجودة (خطأ جديد)، فيمكن تعيينها بقيمة ابتدائية (الحل)، ولا يلزمنا تصعيد الخطأ. فهنا ننظر في المفتاح <code dir="ltr">language</code> هل هو موجود في القاموس <code dir="ltr">user</code> .. فإن لم توجَد عيَّنا له قيمة افتراضية: <code dir="ltr">ar</code> وأكمل الإجراء سيره:</p>
<div class="sourceCode" id="cb45" dir="ltr"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> save_user(user: <span class="bu">dict</span>):</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="st">'language'</span> <span class="kw">not</span> <span class="kw">in</span> user:</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>        user[<span class="st">'language'</span>] <span class="op">=</span> <span class="st">'ar'</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ... rest of the code</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>    save_to_database(user)</span></code><button title="نسخ إلى الحافظة" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>وبهذا يكون الإجراء قد تعامل مع الخطأ بنفسه.</p>
</section>
<section id="وإن-كان-خطا-مرفوعا" class="level3">
<h3 class="anchored" data-anchor-id="وإن-كان-خطا-مرفوعا">وإن كان خطًا مرفوعًا</h3>
<p>وقد مثلنا له بفتح الملف، ونمثل له بمثال آخر: وهو صعود خطأ من إجراء تحويل القيمة النصية الآتية من المستخدم (<code dir="ltr">guess</code>) إلى قيمة عدد صحيح (<code dir="ltr">int</code>)؛ فإننا نستجيب لحدوث الخطأ <code dir="ltr">ValueError</code> ونتعامل معه بإظهار رسالة تفيد المستخدم بمكمن الخطأ وكيفية إصلاحه من جهته: “القيمة ليست عددًا .. من فضلك أدخل قيمة عددية”.</p>
<div id="6c05f456" class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb46" dir="ltr"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_user_guess() <span class="op">-&gt;</span> <span class="bu">int</span>:</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'Please enter a number'</span>)</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>    guess <span class="op">=</span> <span class="bu">input</span>()</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>        guess <span class="op">=</span> <span class="bu">int</span>(guess)</span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span> <span class="pp">ValueError</span>:</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f'The value "</span><span class="sc">{</span>guess<span class="sc">}</span><span class="ss">" is not a number'</span>)</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>        guess <span class="op">=</span> get_user_guess() <span class="co"># recursive call</span></span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> guess</span></code><button title="نسخ إلى الحافظة" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>وبهذا يكون الإجراء يصحح نفسه حتى يضمن عند الرجوع <code dir="ltr">return guess</code> أنه أتمَّ وظيفته بشكل صحيح.</p>
</section>
<section id="الحالة-الثانية-ألا-يستوعبه-السياق" class="level3">
<h3 class="anchored" data-anchor-id="الحالة-الثانية-ألا-يستوعبه-السياق">الحالة الثانية: ألا يستوعبه السياق</h3>
<section id="فإن-كان-خطأ-جديدا-1" class="level4">
<h4 class="anchored" data-anchor-id="فإن-كان-خطأ-جديدا-1">فإن كان خطأ جديدًا</h4>
<p>في هذا المثال نريد أن نُلزم كون وحدة القياس إحدى القيمتين: <code dir="ltr">C</code> (سيليلوز) أو <code dir="ltr">F</code> (فهرنهايت). وإلا فلا حيلة للإجراء أن يتمَّ وظيفته. لذا نرفع خطأ جديدًا بجملة <strong>الرفع</strong> <code dir="ltr">raise</code> على هذا النحو:</p>
<div class="sourceCode" id="cb47" dir="ltr"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> convert_temperature(value: <span class="bu">float</span>, unit: <span class="bu">str</span>) <span class="op">-&gt;</span> <span class="bu">float</span>:</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> unit <span class="kw">not</span> <span class="kw">in</span> {<span class="st">'C'</span>, <span class="st">'F'</span>}:</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="ss">f"Invalid unit: </span><span class="sc">{</span>unit<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> unit <span class="op">==</span> <span class="st">'C'</span>:</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> value <span class="op">*</span> <span class="dv">9</span><span class="op">/</span><span class="dv">5</span> <span class="op">+</span> <span class="dv">32</span></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> unit <span class="op">==</span> <span class="st">'F'</span>:</span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> (value <span class="op">-</span> <span class="dv">32</span>) <span class="op">*</span> <span class="dv">5</span><span class="op">/</span><span class="dv">9</span></span></code><button title="نسخ إلى الحافظة" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>لاحظ أننا اخترنا <code dir="ltr">ValueError</code> لما تقدَّم بيانه عن أن هذا النوع من الأخطاء هو لما يكون صحيح النوع (<code dir="ltr">type</code>) لكن خاطئ القيمة.</p>
</section>
<section id="وإن-كان-خطأ-مرفوعا" class="level4">
<h4 class="anchored" data-anchor-id="وإن-كان-خطأ-مرفوعا">وإن كان خطأً مرفوعًا</h4>
<p><strong>فإن من الأخطاء ما يتعذر على البرنامج معالجته بنفسه:</strong></p>
<ul>
<li>إذا كانت المشكلة بامتلاء الذاكرة في الجهاز (<a href="https://en.wikipedia.org/wiki/Out_of_memory">Out-of-Memory - OOM</a>)؛ فإن البرنامج ليس له إلا أن يخرج برسالة للمستخدم أو المسؤول عن الجهاز .. وليس للبرنامج أن يتعرَّض للمساحة المخصصة لغيره من البرامج في الذاكرة ويتعدى عليها فيسمحها ليتمدد هو!</li>
<li>أما إذا كانت المشكلة في تأخر الإجابة من الخادم مثلاً، فقد نعيد المحاول مرة أخرى بعد ثوانٍ، ونعيدها لعددٍ محدد من المرات، أملاً في الحصول على إجابة. ثم بعد ذلك لا يمكن إلا أن نظهر رسالة خطأ إن نفذت جميع المحاولات.</li>
</ul>
<p>ففي هذا المثال عملية قسمة؛ ونتوقع بحسب معرفتنا الرياضية بإمكان حصول القسمة على صفر في <code dir="ltr">(a / b)</code>، فيرتفع بذلك خطأ اسمه <code dir="ltr">ZeroDivisionError</code> من تلك العملية. والحقيقة أننا في هذا السياق ليس لنا أن نعدِّل الرقم، بل نريد لمن استدعى الإجراء أن يعلم بالخطأ، ولسنا نريد إضافة معلومة أخرى فوق ذلك. لذا نسكت عنه (أي: لا نضع <code dir="ltr">try-except</code>) وهذا يجعله ينتقل مباشرة للإجراء المستدعي.</p>
<div class="sourceCode" id="cb48" dir="ltr"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> divide_lists(list1: <span class="bu">list</span>, list2: <span class="bu">list</span>) <span class="op">-&gt;</span> <span class="bu">list</span>:</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Divide the elements of list1 by the elements of list2</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a><span class="co">    :raises ZeroDivisionError: If the denominator `b` is zero.</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> []</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> a, b <span class="kw">in</span> <span class="bu">zip</span>(list1, list2):</span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>        result.append(a <span class="op">/</span> b)</span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result</span></code><button title="نسخ إلى الحافظة" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>فالطريقة الصحيحة للتعامل مع مثل هذه الأخطاء، أن نتركها تصعد لوحدها، وندوِّن إمكان حصولها في شرح الإجراء (وهو النص الذي في أوَّل جسده).</p>
</section>
</section>
</section>
<section id="من-الخطأ-إلتقاط-جميع-الأخطاء" class="level2">
<h2 class="anchored" data-anchor-id="من-الخطأ-إلتقاط-جميع-الأخطاء">من الخطأ إلتقاط جميع الأخطاء</h2>
<p>من الخطأ في المنطق البرمجي إلتقاط جميع الأخطاء في الإجراءات باستعمال <code dir="ltr">except Exception</code> وهو النوع الشامل لجميع الأخطاء. فهذه الطريقة لا تخبرنا بنوع الخطأ وبالتالي لا نتعامل معه بحسبه، وإنما غاية ما تحقق هو منع تصعيد الخطأ لأعلى طبقة، إذْ حين يحصل ذلك توقف بايثون البرنامج (وعندها تظهر سلسلة الاستدعاءات).</p>
<p>لكن الحالة النادرة تكون في <strong>أطر العمل</strong> (Frameworks) إذْ يجوز ذلك في قطع النص البرمجي التي يُراد لها الاستمرار، وإن فشلَ شيئٌ فيها. مثلاً: لا تريد للخادم أن يتوقف تمامًا بمجرد حصول خطأ واحد في أحد خيوط التنفيذ الخاصة بخدمة أحد الطلبات. ففي مثل ذلك يسوغ استخدام <code dir="ltr">except Exception</code> الشاملة. انظر مثلاً <a href="https://github.com/pallets/flask/blob/2fec0b206c6e83ea813ab26597e15c96fab08be7/src/flask/app.py#L893-L900">قطعة النص البرمجي في إطار الويب فلاسك المسؤول عن استقبال الطلبات</a>.</p>
<hr>
<p><strong>المراجع</strong>:</p>
<ul>
<li>Miguel Grinberg: <a href="https://blog.miguelgrinberg.com/post/the-ultimate-guide-to-error-handling-in-python">The Ultimate Guide to Error Handling in Python</a></li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "تم النسخ!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "تم النسخ!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/hassanalgoz\.github\.io\/python\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<script src="https://utteranc.es/client.js" repo="HassanAlgoz/python" issue-term="og:title" theme="github-light" crossorigin="anonymous" async="">
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../chapters/00_rewrite/09_time.html" class="pagination-link" aria-label="الوقت">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">الوقت</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../chapters/02_numbers/problems.html" class="pagination-link" aria-label="في الأرقام">
        <span class="nav-page-text">في الأرقام</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/hassanalgoz/python/issues/new" class="toc-action"><i class="bi bi-github"></i>الإبلاغ عن مشكلة</a></li></ul></div></div></div></footer><script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




</body></html>