<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ar" xml:lang="ar" dir="rtl"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>14&nbsp; الأخطاء – البايثونية</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./14_classes.html" rel="next">
<link href="./12_serialization.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./01_intro.html">الأصل</a></li><li class="breadcrumb-item"><a href="./13_errors.html"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">الأخطاء</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">البايثونية</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">فاتحة</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./setup.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">إعداد بيئة التطوير</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">الأصل</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01_intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">المدخل إلى بايثون</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02_number.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">الرقم</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_condition.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">الشرط</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04_iteration.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">التكرار</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05_function.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">الإجراء</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06_sequences.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">المجموعة المرتبة</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07_sets.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">المجموعة الرياضية</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08_mapping.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">الربط</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09_strings.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">النصوص</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10_comprehension.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">التعبير المختصر</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11_files.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">الملفات</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12_serialization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">حفظ البيانات</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13_errors.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">الأخطاء</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14_classes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">الأصناف</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./15_extend.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">التخصيص والتركيب</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./16_modules.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">الوحدات</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">فروع</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./zz_time.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">الوقت</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./zz_format.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">تنسيق الطباعة</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./glossary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">المصطلحات</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#الأخطاء-النحوية" id="toc-الأخطاء-النحوية" class="nav-link active" data-scroll-target="#الأخطاء-النحوية"><span class="header-section-number">14.1</span> الأخطاء النحوية</a>
  <ul class="collapse">
  <li><a href="#فقدان-النقطتين" id="toc-فقدان-النقطتين" class="nav-link" data-scroll-target="#فقدان-النقطتين">فقدان النقطتين <code>:</code></a></li>
  <li><a href="#علامات-اقتباس-غير-متوازنة" id="toc-علامات-اقتباس-غير-متوازنة" class="nav-link" data-scroll-target="#علامات-اقتباس-غير-متوازنة">علامات اقتباس غير متوازنة</a></li>
  <li><a href="#اسم-متغير-غير-صالح" id="toc-اسم-متغير-غير-صالح" class="nav-link" data-scroll-target="#اسم-متغير-غير-صالح">اسم متغير غير صالح</a></li>
  <li><a href="#أخطاء-المحاذاة" id="toc-أخطاء-المحاذاة" class="nav-link" data-scroll-target="#أخطاء-المحاذاة">أخطاء المحاذاة</a></li>
  </ul></li>
  <li><a href="#أخطاء-وقت-التشغيل" id="toc-أخطاء-وقت-التشغيل" class="nav-link" data-scroll-target="#أخطاء-وقت-التشغيل"><span class="header-section-number">14.2</span> أخطاء وقت التشغيل</a></li>
  <li><a href="#رفع-الاستثناءات" id="toc-رفع-الاستثناءات" class="nav-link" data-scroll-target="#رفع-الاستثناءات"><span class="header-section-number">14.3</span> رفع الاستثناءات</a></li>
  <li><a href="#أنواع-الأخطاء-الشائعة-وأسبابها-وحلولها" id="toc-أنواع-الأخطاء-الشائعة-وأسبابها-وحلولها" class="nav-link" data-scroll-target="#أنواع-الأخطاء-الشائعة-وأسبابها-وحلولها"><span class="header-section-number">14.4</span> أنواع الأخطاء الشائعة وأسبابها وحلولها:</a>
  <ul class="collapse">
  <li><a href="#كيفية-إصلاح-الأخطاء-الأكثر-تعقيدا" id="toc-كيفية-إصلاح-الأخطاء-الأكثر-تعقيدا" class="nav-link" data-scroll-target="#كيفية-إصلاح-الأخطاء-الأكثر-تعقيدا">كيفية إصلاح الأخطاء الأكثر تعقيدًا؟</a></li>
  </ul></li>
  <li><a href="#الأخطاء-المنطقية" id="toc-الأخطاء-المنطقية" class="nav-link" data-scroll-target="#الأخطاء-المنطقية"><span class="header-section-number">14.5</span> الأخطاء المنطقية</a>
  <ul class="collapse">
  <li><a href="#استخدام-الإجراء-الخاطئ" id="toc-استخدام-الإجراء-الخاطئ" class="nav-link" data-scroll-target="#استخدام-الإجراء-الخاطئ">استخدام الإجراء الخاطئ</a></li>
  <li><a href="#استعمال-العامل-الخاطئ" id="toc-استعمال-العامل-الخاطئ" class="nav-link" data-scroll-target="#استعمال-العامل-الخاطئ">استعمال العامل الخاطئ</a></li>
  <li><a href="#مستوى-محاذاة-خاطئ" id="toc-مستوى-محاذاة-خاطئ" class="nav-link" data-scroll-target="#مستوى-محاذاة-خاطئ">مستوى محاذاة خاطئ</a></li>
  <li><a href="#خطأ-الحافة-off-by-one-error" id="toc-خطأ-الحافة-off-by-one-error" class="nav-link" data-scroll-target="#خطأ-الحافة-off-by-one-error">خطأ الحافَّة (Off-by-one error)</a></li>
  </ul></li>
  <li><a href="#كيفية-حل-الأخطاء-المنطقية" id="toc-كيفية-حل-الأخطاء-المنطقية" class="nav-link" data-scroll-target="#كيفية-حل-الأخطاء-المنطقية"><span class="header-section-number">14.6</span> كيفية حل الأخطاء المنطقية؟</a></li>
  <li><a href="#المراجع" id="toc-المراجع" class="nav-link" data-scroll-target="#المراجع"><span class="header-section-number">14.7</span> المراجع</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./01_intro.html">الأصل</a></li><li class="breadcrumb-item"><a href="./13_errors.html"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">الأخطاء</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">الأخطاء</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>الخطأ أو الاستثناء هو خروج البرنامج عن المسار المثالي.</p>
<ul>
<li>فمثلاً: يحدث خطأ إن طُلِب من المستخدم إدخال قيمة عددية فأدخل قيمة حرفية؛ فوجب التعامل مع ذلك.</li>
<li>أو: تمت قراءة ملف بصيغة معيَّنة لكن تمّ اكتشاف وجود قيم حرفية في مكان قيم التواريخ.</li>
<li>أو: تم طلب معلومات المستخدم من الخادم لكنه لم يُجب.</li>
</ul>
<p>فكل هذه تعتبر مسارات غير مثالية واقعية وعادةً ما تحصل، بل ويجب اعتبارها من الأساس في صناعة البرنامج.</p>
<p>فمن الأخطاء ما يمكن التعامل معه، ومنها ما لا يمكن التعامل معه:</p>
<ul>
<li>إذا كانت المشكلة بامتلاء الذاكرة في الجهاز؛ فإن البرنامج ليس له إلا أن يخرج برسالة للمستخدم أو المسؤول عن الجهاز .. وليس للبرنامج الأحقية في مسح بيانات مثلاً.</li>
<li>أما إذا كانت المشكلة في تأخر الإجابة من الخادم مثلاً، فقد نعيد المحاول مرة أخرى بعد ثوانٍ، ونعيدها لعددٍ محدد من المرات، أملاً في الحصول على إجابة. ثم نظهر رسالة خطأ إن نفدت جميع المحاولات.</li>
</ul>
<p>نستطيع أن نصنف الأخطاء إلى ثلاثة، وهي مرتبة من الأسهل إلى الأصعب:</p>
<ol type="1">
<li>أخطاء نحوية (Syntax errors)</li>
<li>أخطاء وقت التشغيل (Runtime errors)</li>
<li>أخطاء منطقية (Logical errors)</li>
</ol>
<p>في هذا الفصل، سنناقش كل نوع من الأخطاء وكيفية التعامل معها.</p>
<section id="الأخطاء-النحوية" class="level2" data-number="14.1">
<h2 data-number="14.1" class="anchored" data-anchor-id="الأخطاء-النحوية"><span class="header-section-number">14.1</span> الأخطاء النحوية</h2>
<p>الأخطاء النحوي تتعلق بتركيب اللغة لا أكثر ولا أقل. إليك ثلاثة أمثلة.</p>
<section id="فقدان-النقطتين" class="level3">
<h3 class="anchored" data-anchor-id="فقدان-النقطتين">فقدان النقطتين <code>:</code></h3>
<div id="a2221380" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1"></a><span class="cf">if</span> (x <span class="op">&gt;</span> <span class="dv">5</span>)</span>
<span id="cb1-2"><a href="#cb1-2"></a>    <span class="bu">print</span>(<span class="st">"x"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-cyan-fg ansi-bold">  Cell </span><span class="ansi-green-fg ansi-bold">In[114], line 1</span>
<span class="ansi-yellow-fg ansi-bold">    if (x &gt; 5)</span>
<span class="ansi-white-fg ansi-bold">              ^</span>
<span class="ansi-red-fg ansi-bold">SyntaxError</span><span class="ansi-red-fg ansi-bold">:</span> expected ':'
</pre>
</div>
</div>
</div>
</section>
<section id="علامات-اقتباس-غير-متوازنة" class="level3">
<h3 class="anchored" data-anchor-id="علامات-اقتباس-غير-متوازنة">علامات اقتباس غير متوازنة</h3>
<div id="36fad83d" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1"></a><span class="bu">print</span>(<span class="st">"x</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-cyan-fg ansi-bold">  Cell </span><span class="ansi-green-fg ansi-bold">In[115], line 1</span>
<span class="ansi-yellow-fg ansi-bold">    print("x</span>
<span class="ansi-white-fg ansi-bold">          ^</span>
<span class="ansi-red-fg ansi-bold">SyntaxError</span><span class="ansi-red-fg ansi-bold">:</span> unterminated string literal (detected at line 1)
</pre>
</div>
</div>
</div>
</section>
<section id="اسم-متغير-غير-صالح" class="level3">
<h3 class="anchored" data-anchor-id="اسم-متغير-غير-صالح">اسم متغير غير صالح</h3>
<div id="c915bbea" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1"></a>my<span class="op">-</span>variable <span class="op">=</span> <span class="dv">10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-cyan-fg ansi-bold">  Cell </span><span class="ansi-green-fg ansi-bold">In[116], line 1</span>
<span class="ansi-yellow-fg ansi-bold">    my-variable = 10</span>
<span class="ansi-white-fg ansi-bold">    ^</span>
<span class="ansi-red-fg ansi-bold">SyntaxError</span><span class="ansi-red-fg ansi-bold">:</span> cannot assign to expression here. Maybe you meant '==' instead of '='?
</pre>
</div>
</div>
</div>
</section>
<section id="أخطاء-المحاذاة" class="level3">
<h3 class="anchored" data-anchor-id="أخطاء-المحاذاة">أخطاء المحاذاة</h3>
<p>من الأخطاء النحوية الشائعة في بايثون: أخطاء المحاذاة (Indentation Error).</p>
<p>وذلك أن بايثون تقبل نوعين من المسافات البادئة للسطر؛ إما بحرف المسافة التي بين الكلمات <code>\s</code> أو بحرف المسافة بين الأعمدة <code>\t</code>. وقد يستعمل بعض الناس هذه وبعضهم ذلك، ثم تأخذ كودًا من هنا وكودًا من هناك، فترى الكود عنك لا يعمل، والسبب هو الخلط بينهما في نفس الكود. وبايثون لا تقبل ذلك. فيجب توحيد النوع. إما هذه أو هذه. لذلك يضبط VS Code ومحررات الأكواد الأخرى تحويل البادئة تلقائيًا إلى مسافة أو العكس.</p>
<p>إليك بعض الأمثلة لما يحصل من أخطاء في المحاذاة:</p>
<p>عدم وجود مسافة بادئة، عندما تكون متوقعة:</p>
<div id="1e53b0b1" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1"></a><span class="cf">if</span> <span class="va">True</span>:</span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="bu">print</span>(<span class="st">"x"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-cyan-fg ansi-bold">  Cell </span><span class="ansi-green-fg ansi-bold">In[117], line 2</span>
<span class="ansi-yellow-fg ansi-bold">    print("x")</span>
<span class="ansi-white-fg ansi-bold">    ^</span>
<span class="ansi-red-fg ansi-bold">IndentationError</span><span class="ansi-red-fg ansi-bold">:</span> expected an indented block after 'if' statement on line 1
</pre>
</div>
</div>
</div>
<p>عدم تطابق المحاذاة:</p>
<div id="f436de6a" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1"></a><span class="cf">if</span> <span class="va">True</span>:</span>
<span id="cb5-2"><a href="#cb5-2"></a>    <span class="bu">print</span>(<span class="st">"x"</span>)</span>
<span id="cb5-3"><a href="#cb5-3"></a>     <span class="bu">print</span>(<span class="st">'y'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-cyan-fg ansi-bold">  Cell </span><span class="ansi-green-fg ansi-bold">In[118], line 3</span>
<span class="ansi-yellow-fg ansi-bold">    print('y')</span>
<span class="ansi-white-fg ansi-bold">    ^</span>
<span class="ansi-red-fg ansi-bold">IndentationError</span><span class="ansi-red-fg ansi-bold">:</span> unexpected indent
</pre>
</div>
</div>
</div>
</section>
</section>
<section id="أخطاء-وقت-التشغيل" class="level2" data-number="14.2">
<h2 data-number="14.2" class="anchored" data-anchor-id="أخطاء-وقت-التشغيل"><span class="header-section-number">14.2</span> أخطاء وقت التشغيل</h2>
<p><strong>خطأ وقت التشغيل</strong> هو ما يكتشفه البرنامج عند تنفيذه. ويُعرف <strong>بالاستثناء</strong> (Exception).</p>
<p>عند إهمال هذه الأخطاء يحصل أمران عند تنفيذ سببها:</p>
<ol type="1">
<li>يتوقف البرنامج</li>
<li>تظهر رسالة خطأ عن طريق منفذ الخطأ (stderr)</li>
</ol>
<p>تسمى الاستثناءات بهذا الاسم لأنها تقطع التدفق المثالي السعيد للبرنامج. والحقيقة أنها ليست استثناءات من حيث نُدرتها؛ بل هي شائعة جدًّا ويجب التنبه إليها مثل أي حالة أخرى من البرنامج. مثلاً: عند قراءة ملف، يجب أن نتعامل مع حالة ما لو كان الملف غير موجودًا.</p>
<p>هناك آليتان في لغات البرمجة للتعبير عن حدوث خطأ:</p>
<ul>
<li><strong>الاستثناء (Exceptions)</strong>: لغات مثل C++ (1979)، Java (1998)، Python (1991) و JavaScript (1995) ترمي/ترفع الاستثناءات باستعمال عبارة مثلة <code>raise</code> أو عبارة <code>throw</code> على حسب اللغة.</li>
<li><strong>الإرجاع (Return)</strong>: اللغات الحديثة مثل Go (2009) و Rust (2015) ببساطة تعيد الخطأ كشيء (قيمة) عند حدوثه باستعمال جملة <code>return</code> التي في الإجراء.</li>
</ul>
<p>لنأخذ مثالًا لنرى كيف يتم التعامل مع الاستثناءات في Python.</p>
<section id="مثال" class="level4">
<h4 class="anchored" data-anchor-id="مثال">مثال</h4>
<p>افترض في بداية البرنامج، نحتاج إلى قراءة ملف تكوين <code>config.json</code> لتهيئة حالة البرنامج:</p>
<div id="da97dbc0" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1"></a><span class="bu">file</span> <span class="op">=</span> <span class="bu">open</span>(<span class="st">'config.json'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg ansi-bold">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg ansi-bold">FileNotFoundError</span>                         Traceback (most recent call last)
Cell <span class="ansi-green-fg ansi-bold">In[119], line 1</span>
<span class="ansi-green-fg ansi-bold">----&gt; 1</span> file <span style="color:rgb(98,98,98)">=</span> <span style="color:rgb(0,135,0)" class="ansi-yellow-bg">open</span><span class="ansi-yellow-bg">(</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">'</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">config.json</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">'</span><span class="ansi-yellow-bg">)</span>

File <span class="ansi-green-fg ansi-bold">~\miniconda3\envs\bookenv\Lib\site-packages\IPython\core\interactiveshell.py:310</span>, in <span class="ansi-cyan-fg">_modified_open</span><span class="ansi-blue-fg ansi-bold">(file, *args, **kwargs)</span>
<span class="ansi-green-fg">    303</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> file <span style="font-weight:bold;color:rgb(175,0,255)">in</span> {<span style="color:rgb(98,98,98)">0</span>, <span style="color:rgb(98,98,98)">1</span>, <span style="color:rgb(98,98,98)">2</span>}:
<span class="ansi-green-fg">    304</span>     <span style="font-weight:bold;color:rgb(0,135,0)">raise</span> <span style="font-weight:bold;color:rgb(215,95,95)">ValueError</span>(
<span class="ansi-green-fg">    305</span>         <span style="color:rgb(175,0,0)">f</span><span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">IPython won</span><span style="color:rgb(175,0,0)">'</span><span style="color:rgb(175,0,0)">t let you open fd=</span><span style="font-weight:bold;color:rgb(175,95,135)">{</span>file<span style="font-weight:bold;color:rgb(175,95,135)">}</span><span style="color:rgb(175,0,0)"> by default </span><span style="color:rgb(175,0,0)">"</span>
<span class="ansi-green-fg">    306</span>         <span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">as it is likely to crash IPython. If you know what you are doing, </span><span style="color:rgb(175,0,0)">"</span>
<span class="ansi-green-fg">    307</span>         <span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">you can use builtins</span><span style="color:rgb(175,0,0)">'</span><span style="color:rgb(175,0,0)"> open.</span><span style="color:rgb(175,0,0)">"</span>
<span class="ansi-green-fg">    308</span>     )
<span class="ansi-green-fg ansi-bold">--&gt; 310</span> <span style="font-weight:bold;color:rgb(0,135,0)">return</span> <span class="ansi-yellow-bg">io_open</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">file</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">*</span><span class="ansi-yellow-bg">args</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">*</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">*</span><span class="ansi-yellow-bg">kwargs</span><span class="ansi-yellow-bg">)</span>

<span class="ansi-red-fg ansi-bold">FileNotFoundError</span>: [Errno 2] No such file or directory: 'config.json'</pre>
</div>
</div>
</div>
<p>الملف غير موجود لذا يعرف إجراء <code>open()</code> استثناءً من نوع <code>FileNotFoundError</code>. فنعالج هذا الاستثناء باستخدام جملة <code>try-except</code>. دعونا نطبع رسالة تخبر المستخدم بإنشاء الملف. أو الأفضل من ذلك، دعونا نشير إلى ملف تكوين افتراضي: <code>default.json</code>:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1"></a><span class="cf">try</span>:</span>
<span id="cb7-2"><a href="#cb7-2"></a>    <span class="bu">file</span> <span class="op">=</span> <span class="bu">open</span>(<span class="st">'config.json'</span>)</span>
<span id="cb7-3"><a href="#cb7-3"></a>    <span class="co"># code that does something ...</span></span>
<span id="cb7-4"><a href="#cb7-4"></a>    <span class="co"># ...</span></span>
<span id="cb7-5"><a href="#cb7-5"></a><span class="cf">except</span> <span class="pp">FileNotFoundError</span>:</span>
<span id="cb7-6"><a href="#cb7-6"></a>    <span class="bu">file</span> <span class="op">=</span> <span class="bu">open</span>(DEFAULT_CONFIG_PATH)</span>
<span id="cb7-7"><a href="#cb7-7"></a><span class="cf">except</span> <span class="pp">Exception</span> <span class="im">as</span> e:</span>
<span id="cb7-8"><a href="#cb7-8"></a>    <span class="bu">print</span>(<span class="st">"something unexpected happened:"</span>, e)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>الفقرة الأخيرة <code>except Exception as e</code> هي عبارة عن استثناء شامل، وذلك في حال حصول استثناء آخر لم نتوقعه. والغرض من ذلك ألا يتوقف البرنامج.</p>
</section>
<section id="مثال-آخر" class="level4">
<h4 class="anchored" data-anchor-id="مثال-آخر">مثال آخر</h4>
<p>دعونا نلقي نظرة على مثال آخر، قد يحصل فيه حالة خطأ بسبب تنوع مدخلات المستخدم:</p>
<div id="98b4770a" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1"></a>choices <span class="op">=</span> [<span class="st">'bus'</span>, <span class="st">'train'</span>, <span class="st">'plane'</span>, <span class="st">'boat'</span>] </span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="bu">print</span>(<span class="st">"""Choose an option:</span></span>
<span id="cb8-3"><a href="#cb8-3"></a><span class="st">1. Go by bus</span></span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="st">2. Go by train</span></span>
<span id="cb8-5"><a href="#cb8-5"></a><span class="st">3. Go by plane</span></span>
<span id="cb8-6"><a href="#cb8-6"></a><span class="st">4. Go by boat</span></span>
<span id="cb8-7"><a href="#cb8-7"></a><span class="st">"""</span>)</span>
<span id="cb8-8"><a href="#cb8-8"></a><span class="co"># choice = input("Choose a number from 1 to 4: ")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Choose an option:
1. Go by bus
2. Go by train
3. Go by plane
4. Go by boat
</code></pre>
</div>
</div>
<p>ما هي حالات الخطأ الممكنة؟:</p>
<ul>
<li>قد يدخل المستخدم رقمًا خارج النطاق: <code>0</code> أو <code>9</code></li>
<li>قد يدخل المستخدم قيمة غير صحيحة: <code>three</code></li>
</ul>
<p>نحتاج إلى التعامل مع هذه الاستثناءات. يمكننا استخدام كتلة <code>try-except</code> للتعامل مع الاستثناءات.</p>
<p>دعونا نرى ما هو الاستثناء الذي يتم رفعه في الحالة الأولى:</p>
<div id="ed353cf6" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1"></a>choices[<span class="dv">9</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg ansi-bold">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg ansi-bold">IndexError</span>                                Traceback (most recent call last)
Cell <span class="ansi-green-fg ansi-bold">In[121], line 1</span>
<span class="ansi-green-fg ansi-bold">----&gt; 1</span> <span class="ansi-yellow-bg">choices</span><span class="ansi-yellow-bg">[</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">9</span><span class="ansi-yellow-bg">]</span>

<span class="ansi-red-fg ansi-bold">IndexError</span>: list index out of range</pre>
</div>
</div>
</div>
<p>الاستثناء هو <code>IndexError</code>.</p>
<p>ماذا عن الحالة الثانية؟ لنرى:</p>
<div id="6eb7ae66" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1"></a>choices[<span class="st">'three'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg ansi-bold">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg ansi-bold">TypeError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg ansi-bold">In[122], line 1</span>
<span class="ansi-green-fg ansi-bold">----&gt; 1</span> <span class="ansi-yellow-bg">choices</span><span class="ansi-yellow-bg">[</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">'</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">three</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">'</span><span class="ansi-yellow-bg">]</span>

<span class="ansi-red-fg ansi-bold">TypeError</span>: list indices must be integers or slices, not str</pre>
</div>
</div>
</div>
<p>الاستثناء هو <code>TypeError</code>.</p>
<p>الآن بعد أن عرفنا الحالات، دعونا نتعامل معها.</p>
<div id="93cf4109" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1"></a>c <span class="op">=</span> <span class="st">'9'</span></span>
<span id="cb12-2"><a href="#cb12-2"></a></span>
<span id="cb12-3"><a href="#cb12-3"></a>retry_message <span class="op">=</span> <span class="st">"Please enter a digit between 1 and 4"</span></span>
<span id="cb12-4"><a href="#cb12-4"></a></span>
<span id="cb12-5"><a href="#cb12-5"></a><span class="cf">try</span>:</span>
<span id="cb12-6"><a href="#cb12-6"></a>    c <span class="op">=</span> <span class="bu">int</span>(c)</span>
<span id="cb12-7"><a href="#cb12-7"></a>    <span class="bu">print</span>(<span class="st">'User chooses to:'</span>, choices[c<span class="op">-</span><span class="dv">1</span>])</span>
<span id="cb12-8"><a href="#cb12-8"></a><span class="cf">except</span> <span class="pp">IndexError</span>:</span>
<span id="cb12-9"><a href="#cb12-9"></a>    <span class="bu">print</span>(retry_message)</span>
<span id="cb12-10"><a href="#cb12-10"></a><span class="cf">except</span> <span class="pp">ValueError</span>:</span>
<span id="cb12-11"><a href="#cb12-11"></a>    <span class="bu">print</span>(retry_message)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Please enter a digit between 1 and 4</code></pre>
</div>
</div>
<p>يمكن تجميع الاستثناءات على النحو التالي:</p>
<div id="cb194646" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1"></a><span class="cf">try</span>:</span>
<span id="cb14-2"><a href="#cb14-2"></a>    c <span class="op">=</span> <span class="bu">int</span>(c)</span>
<span id="cb14-3"><a href="#cb14-3"></a>    <span class="bu">print</span>(<span class="st">'User chooses to:'</span>, choices[c<span class="op">-</span><span class="dv">1</span>])</span>
<span id="cb14-4"><a href="#cb14-4"></a><span class="cf">except</span> (<span class="pp">IndexError</span>, <span class="pp">ValueError</span>):</span>
<span id="cb14-5"><a href="#cb14-5"></a>    <span class="bu">print</span>(retry_message)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Please enter a digit between 1 and 4</code></pre>
</div>
</div>
</section>
</section>
<section id="رفع-الاستثناءات" class="level2" data-number="14.3">
<h2 data-number="14.3" class="anchored" data-anchor-id="رفع-الاستثناءات"><span class="header-section-number">14.3</span> رفع الاستثناءات</h2>
<p>إذا كنت تريد رفع استثناء، يمكنك استخدام الكلمة <code>raise</code>.</p>
<ul>
<li>إذا كان نوع العامل خاطئًا، يجب رفع <code>TypeError</code></li>
<li>وإلا، فتحقق من القيمة؛ فإن كانت خارج نطاق الإدخال المقبول، يجب رفع <code>ValueError</code></li>
</ul>
<p>ملاحظة: كان علينا استيراد <code>numbers</code> للتحقق من نوع الإدخال <code>x</code> باستخدام الإجراء المضمَّن: <code>isinstance(x, numbers.Number)</code> على النحو التالي:</p>
<div id="52a6e775" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1"></a><span class="im">import</span> numbers</span>
<span id="cb16-2"><a href="#cb16-2"></a></span>
<span id="cb16-3"><a href="#cb16-3"></a><span class="kw">def</span> square_root(x):</span>
<span id="cb16-4"><a href="#cb16-4"></a>    <span class="co"># Validation</span></span>
<span id="cb16-5"><a href="#cb16-5"></a>    <span class="cf">if</span> <span class="kw">not</span> <span class="bu">isinstance</span>(x, numbers.Number):</span>
<span id="cb16-6"><a href="#cb16-6"></a>        <span class="cf">raise</span> <span class="pp">TypeError</span>(<span class="st">"Argument must be a number"</span>)</span>
<span id="cb16-7"><a href="#cb16-7"></a>    <span class="cf">if</span> x <span class="op">&lt;</span> <span class="dv">0</span>:</span>
<span id="cb16-8"><a href="#cb16-8"></a>        <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">"Cannot calculate square root of a negative number"</span>)</span>
<span id="cb16-9"><a href="#cb16-9"></a>    <span class="co"># Now that we have checked the input, we can calculate the square root</span></span>
<span id="cb16-10"><a href="#cb16-10"></a>    result <span class="op">=</span> x <span class="op">**</span> <span class="fl">0.5</span></span>
<span id="cb16-11"><a href="#cb16-11"></a>    <span class="cf">return</span> result</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>لنختبر حالتي الخطأ:</p>
<div id="d18eb3e2" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1"></a>square_root(<span class="st">'16'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg ansi-bold">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg ansi-bold">TypeError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg ansi-bold">In[126], line 1</span>
<span class="ansi-green-fg ansi-bold">----&gt; 1</span> <span class="ansi-yellow-bg">square_root</span><span class="ansi-yellow-bg">(</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">'</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">16</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">'</span><span class="ansi-yellow-bg">)</span>

Cell <span class="ansi-green-fg ansi-bold">In[125], line 6</span>, in <span class="ansi-cyan-fg">square_root</span><span class="ansi-blue-fg ansi-bold">(x)</span>
<span class="ansi-green-fg">      3</span> <span style="font-weight:bold;color:rgb(0,135,0)">def</span> <span style="color:rgb(0,0,255)">square_root</span>(x):
<span class="ansi-green-fg">      4</span>     <span style="font-style:italic;color:rgb(95,135,135)"># Validation</span>
<span class="ansi-green-fg">      5</span>     <span style="font-weight:bold;color:rgb(0,135,0)">if</span> <span style="font-weight:bold;color:rgb(175,0,255)">not</span> <span style="color:rgb(0,135,0)">isinstance</span>(x, numbers<span style="color:rgb(98,98,98)">.</span>Number):
<span class="ansi-green-fg ansi-bold">----&gt; 6</span>         <span style="font-weight:bold;color:rgb(0,135,0)">raise</span> <span style="font-weight:bold;color:rgb(215,95,95)">TypeError</span>(<span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">Argument must be a number</span><span style="color:rgb(175,0,0)">"</span>)
<span class="ansi-green-fg">      7</span>     <span style="font-weight:bold;color:rgb(0,135,0)">if</span> x <span style="color:rgb(98,98,98)">&lt;</span> <span style="color:rgb(98,98,98)">0</span>:
<span class="ansi-green-fg">      8</span>         <span style="font-weight:bold;color:rgb(0,135,0)">raise</span> <span style="font-weight:bold;color:rgb(215,95,95)">ValueError</span>(<span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">Cannot calculate square root of a negative number</span><span style="color:rgb(175,0,0)">"</span>)

<span class="ansi-red-fg ansi-bold">TypeError</span>: Argument must be a number</pre>
</div>
</div>
</div>
<div id="330e0f57" class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1"></a>square_root(<span class="op">-</span><span class="dv">99</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg ansi-bold">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg ansi-bold">ValueError</span>                                Traceback (most recent call last)
Cell <span class="ansi-green-fg ansi-bold">In[127], line 1</span>
<span class="ansi-green-fg ansi-bold">----&gt; 1</span> <span class="ansi-yellow-bg">square_root</span><span class="ansi-yellow-bg">(</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">-</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">99</span><span class="ansi-yellow-bg">)</span>

Cell <span class="ansi-green-fg ansi-bold">In[125], line 8</span>, in <span class="ansi-cyan-fg">square_root</span><span class="ansi-blue-fg ansi-bold">(x)</span>
<span class="ansi-green-fg">      6</span>     <span style="font-weight:bold;color:rgb(0,135,0)">raise</span> <span style="font-weight:bold;color:rgb(215,95,95)">TypeError</span>(<span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">Argument must be a number</span><span style="color:rgb(175,0,0)">"</span>)
<span class="ansi-green-fg">      7</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> x <span style="color:rgb(98,98,98)">&lt;</span> <span style="color:rgb(98,98,98)">0</span>:
<span class="ansi-green-fg ansi-bold">----&gt; 8</span>     <span style="font-weight:bold;color:rgb(0,135,0)">raise</span> <span style="font-weight:bold;color:rgb(215,95,95)">ValueError</span>(<span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">Cannot calculate square root of a negative number</span><span style="color:rgb(175,0,0)">"</span>)
<span class="ansi-green-fg">      9</span> <span style="font-style:italic;color:rgb(95,135,135)"># Now that we have checked the input, we can calculate the square root</span>
<span class="ansi-green-fg">     10</span> result <span style="color:rgb(98,98,98)">=</span> x <span style="color:rgb(98,98,98)">*</span><span style="color:rgb(98,98,98)">*</span> <span style="color:rgb(98,98,98)">0.5</span>

<span class="ansi-red-fg ansi-bold">ValueError</span>: Cannot calculate square root of a negative number</pre>
</div>
</div>
</div>
<p>لنختبر الآن المسار السعيد:</p>
<div id="e1bc1a3a" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1"></a>square_root(<span class="dv">16</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="128">
<pre><code>4.0</code></pre>
</div>
</div>
</section>
<section id="أنواع-الأخطاء-الشائعة-وأسبابها-وحلولها" class="level2" data-number="14.4">
<h2 data-number="14.4" class="anchored" data-anchor-id="أنواع-الأخطاء-الشائعة-وأسبابها-وحلولها"><span class="header-section-number">14.4</span> أنواع الأخطاء الشائعة وأسبابها وحلولها:</h2>
<p>فيما يلي بعض أنواع الأخطاء الشائعة وكيفية إصلاحها:</p>
<!-- | **Error Type**  | **Cause**                                                                                  | **Fix**                                                                                   |
|-----------------|---------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------|
| `TypeError`     | Happens when an operation is performed on an object of an inappropriate type, or a function is called with the wrong number/type of arguments. | Use `type()` or `isinstance()` to check the data types used match the operation requirements (e.g., `int+int` is valid whereas `str+int` is not). |
| `ValueError`    | Raised when a function receives an argument of the correct type but with an inappropriate value (e.g., passing a negative number where only positive numbers are valid). | Ensure the values passed to functions are valid and match the expected range or domain.    |
| `IndexError`    | Triggered when trying to access an index that is outside the range of a list or sequence.     | Check the length of the sequence (e.g., using `len()`) before accessing indices. You can also use `try-except` blocks to handle potential IndexError exceptions safely. Consider iterating over the list or using bounds-safe methods like `enumerate()`. |
| `KeyError`      | Raised when trying to access a key that does not exist in a dictionary.                       | Check for the key’s existence using `in` before accessing it (e.g., `if key in dict`). Alternatively, use the `.get()` method, which returns `None` (or a default value) if the key is not found, instead of raising an error. |
| `AttributeError`| Happens when an invalid attribute or method is accessed for an object (e.g., calling a method that doesn’t exist for a certain object). | Verify that the object has the attribute or method you're trying to use. Check for typos or wrong types. |
| `ModuleNotFoundError` | Happens when Python cannot find the module you are trying to import.                        | Check the module name for typos. Ensure the module is installed in your Python environment. |
| `SyntaxError`   | Occurs when the Python parser encounters a syntax error.                                      | Check the code for missing or extra characters, incorrect indentation, or other syntax issues. |
| `NamedError`    | Happens when a variable is used before it is defined.                                        | Ensure the variable is defined before using it. Also, check for typos in the variable name. | -->
<ol type="1">
<li><strong><code>TypeError</code></strong>
<ul>
<li><strong>السبب</strong>: يحدث عندما يتم تنفيذ عملية على كائن من نوع غير مناسب، أو عند استدعاء دالة بعدد أو نوع غير صحيح من الوسائط.<br>
</li>
<li><strong>الحل</strong>: استخدم <code>type()</code> أو <code>isinstance()</code> للتحقق من تطابق أنواع البيانات المستخدمة مع متطلبات العملية (على سبيل المثال، <code>int+int</code> صحيحة بينما <code>str+int</code> غير صحيحة).</li>
</ul></li>
<li><strong><code>ValueError</code></strong>
<ul>
<li><strong>السبب</strong>: يتم رفع هذا الخطأ عندما تستقبل دالة وسيطاً من النوع الصحيح ولكنه ذو قيمة غير مناسبة (مثل تمرير عدد سالب إلى مكان يُتوقع فيه أعداد موجبة فقط).<br>
</li>
<li><strong>الحل</strong>: تأكد من أن القيم الممررة إلى الدوال صحيحة وتتطابق مع النطاق أو المجال المتوقع.</li>
</ul></li>
<li><strong><code>IndexError</code></strong>
<ul>
<li><strong>السبب</strong>: يتم رفع هذا الخطأ عند محاولة الوصول إلى عنصر في موقع خارج حدود قائمة أو سلسلة.<br>
</li>
<li><strong>الحل</strong>: تحقق من طول التسلسل (مثل استخدام <code>len()</code>) قبل الوصول إلى الفهارس. يمكنك أيضاً استخدام كتل <code>try-except</code> للتعامل مع استثناءات <code>IndexError</code> بأمان. فكّر في التكرار على القائمة أو استخدام طرق آمنة مثل <code>enumerate()</code>.</li>
</ul></li>
<li><strong><code>KeyError</code></strong>
<ul>
<li><strong>السبب</strong>: يحدث عند محاولة الوصول إلى مفتاح غير موجود في القاموس.<br>
</li>
<li><strong>الحل</strong>: تحقق من وجود المفتاح باستخدام <code>in</code> قبل الوصول إليه (مثل <code>if key in dict</code>). بدلاً من ذلك، يمكنك استخدام الطريقة <code>.get()</code> التي تُرجع <code>None</code> (أو قيمة افتراضية) إذا لم يتم العثور على المفتاح بدلاً من رفع خطأ.</li>
</ul></li>
<li><strong><code>AttributeError</code></strong>
<ul>
<li><strong>السبب</strong>: يحدث عند محاولة الوصول إلى خاصية أو دالة غير صالحة لكائن معين (مثل استدعاء دالة غير موجودة على الكائن).<br>
</li>
<li><strong>الحل</strong>: تحقق مما إذا كان الكائن يحتوي على الخاصية أو الدالة التي تحاول استخدامها. تحقق من وجود أخطاء إملائية أو من كون نوع الكائن صحيحاً.</li>
</ul></li>
<li><strong><code>ModuleNotFoundError</code></strong>
<ul>
<li><strong>السبب</strong>: يحدث عندما لا يستطيع Python العثور على الوحدة (module) التي تحاول استيرادها.<br>
</li>
<li><strong>الحل</strong>: تحقق من اسم الوحدة للتأكد من خلوه من الأخطاء الإملائية. تأكد من تثبيت الوحدة في بيئة Python الخاصة بك.</li>
</ul></li>
<li><strong><code>SyntaxError</code></strong>
<ul>
<li><strong>السبب</strong>: يحدث عندما يعترض المفسّر (Python parser) على خطأ في بناء الجملة.<br>
</li>
<li><strong>الحل</strong>: تحقق من وجود أي أحرف مفقودة أو زائدة، أو مشاكل في التنسيق، أو أي أخطاء في بناء الجملة.</li>
</ul></li>
<li><strong><code>NameError</code></strong>
<ul>
<li><strong>السبب</strong>: يحدث عندما يتم استخدام متغير قبل تعريفه.<br>
</li>
<li><strong>الحل</strong>: تأكد من تعريف المتغير قبل استخدامه. تحقق أيضاً من وجود أخطاء إملائية في اسم المتغير.</li>
</ul></li>
</ol>
<section id="كيفية-إصلاح-الأخطاء-الأكثر-تعقيدا" class="level3">
<h3 class="anchored" data-anchor-id="كيفية-إصلاح-الأخطاء-الأكثر-تعقيدا">كيفية إصلاح الأخطاء الأكثر تعقيدًا؟</h3>
<p>قد تتطلب الأخطاء الأكثر تعقيدًا المزيد من التصحيح وفهم الكود. لذا، من المهم تعلم كيفية قراءة رسالة الخطأ التي تنتجها Python. يتكون الخطأ من ثلاثة أجزاء: <strong>نوع الخطأ</strong>، <strong>رسالة الخطأ</strong>، و <strong>سلسلة النداءات</strong> (stack trace).</p>
<p>أولاً، اقرأ السطر الأخير. فذلك يخبرك بأمرين:</p>
<ol type="1">
<li><code>ErrorType</code> الذي يمكنك استخدامه في كتلة <code>try-catch</code> إذا لزم الأمر</li>
<li>يتبعه رسالة خطأ بلغة إنجليزية بسيطة توضح ما حدث</li>
</ol>
<p>تدرج سلسلة النداءات (stack trace) الاستدعاءات (الدوال التي تستدعي دوال أخرى). وبالتالي، فإن الكود الذي رفع الخطأ سيكون الأخير (في الأسفل)، في حين أن الدالة التي بدأت ذلك ستكون الأولى (في الأعلى).</p>
<p>اعتبر سلسلة الاستدعاءات حيث تستدعي <code>func_app</code> الدالة <code>func_library_1</code> التي تستدعي الدالة <code>func_library_2</code>. يُفترض أن الدالتين الأخريين هما مكتبات مستوردة. مثال: نعرّف دوال في تطبيقنا تستدعي مكتبة <code>pandas</code> التي تستدعي مكتبة <code>numpy</code>.</p>
<p>قد يتم رفع استثناء في مكان ما، ونريد تطبيق ما تعلمناه أعلاه لقراءته وإصلاحه.</p>
<div id="79b30ce4" class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1"></a><span class="kw">def</span> func_library_2(c):</span>
<span id="cb21-2"><a href="#cb21-2"></a>    <span class="cf">if</span> <span class="bu">len</span>(c) <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb21-3"><a href="#cb21-3"></a>        <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">"Empty input"</span>)</span>
<span id="cb21-4"><a href="#cb21-4"></a>    z <span class="op">=</span> c</span>
<span id="cb21-5"><a href="#cb21-5"></a>    <span class="cf">return</span> z</span>
<span id="cb21-6"><a href="#cb21-6"></a></span>
<span id="cb21-7"><a href="#cb21-7"></a><span class="kw">def</span> func_library_1(b, c):</span>
<span id="cb21-8"><a href="#cb21-8"></a>    <span class="cf">if</span> <span class="kw">not</span> <span class="bu">isinstance</span>(c, <span class="bu">str</span>):</span>
<span id="cb21-9"><a href="#cb21-9"></a>        <span class="cf">raise</span> <span class="pp">TypeError</span>(<span class="st">"c must be a string"</span>)</span>
<span id="cb21-10"><a href="#cb21-10"></a>    y <span class="op">=</span> func_library_2(c)</span>
<span id="cb21-11"><a href="#cb21-11"></a>    <span class="cf">return</span> b <span class="op">+</span> y</span>
<span id="cb21-12"><a href="#cb21-12"></a></span>
<span id="cb21-13"><a href="#cb21-13"></a><span class="kw">def</span> func_app(a, b, c):</span>
<span id="cb21-14"><a href="#cb21-14"></a>    x <span class="op">=</span> func_library_1(b, c)</span>
<span id="cb21-15"><a href="#cb21-15"></a>    <span class="cf">return</span> a <span class="op">+</span> x</span>
<span id="cb21-16"><a href="#cb21-16"></a></span>
<span id="cb21-17"><a href="#cb21-17"></a>func_app(<span class="st">'a'</span>, <span class="st">'b'</span>, <span class="st">''</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg ansi-bold">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg ansi-bold">ValueError</span>                                Traceback (most recent call last)
Cell <span class="ansi-green-fg ansi-bold">In[129], line 17</span>
<span class="ansi-green-fg">     14</span>     x <span style="color:rgb(98,98,98)">=</span> func_library_1(b, c)
<span class="ansi-green-fg">     15</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> a <span style="color:rgb(98,98,98)">+</span> x
<span class="ansi-green-fg ansi-bold">---&gt; 17</span> <span class="ansi-yellow-bg">func_app</span><span class="ansi-yellow-bg">(</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">'</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">a</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">'</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">'</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">b</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">'</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">'</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">'</span><span class="ansi-yellow-bg">)</span>

Cell <span class="ansi-green-fg ansi-bold">In[129], line 14</span>, in <span class="ansi-cyan-fg">func_app</span><span class="ansi-blue-fg ansi-bold">(a, b, c)</span>
<span class="ansi-green-fg">     13</span> <span style="font-weight:bold;color:rgb(0,135,0)">def</span> <span style="color:rgb(0,0,255)">func_app</span>(a, b, c):
<span class="ansi-green-fg ansi-bold">---&gt; 14</span>     x <span style="color:rgb(98,98,98)">=</span> <span class="ansi-yellow-bg">func_library_1</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">b</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">c</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">     15</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> a <span style="color:rgb(98,98,98)">+</span> x

Cell <span class="ansi-green-fg ansi-bold">In[129], line 10</span>, in <span class="ansi-cyan-fg">func_library_1</span><span class="ansi-blue-fg ansi-bold">(b, c)</span>
<span class="ansi-green-fg">      8</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> <span style="font-weight:bold;color:rgb(175,0,255)">not</span> <span style="color:rgb(0,135,0)">isinstance</span>(c, <span style="color:rgb(0,135,0)">str</span>):
<span class="ansi-green-fg">      9</span>     <span style="font-weight:bold;color:rgb(0,135,0)">raise</span> <span style="font-weight:bold;color:rgb(215,95,95)">TypeError</span>(<span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">c must be a string</span><span style="color:rgb(175,0,0)">"</span>)
<span class="ansi-green-fg ansi-bold">---&gt; 10</span> y <span style="color:rgb(98,98,98)">=</span> <span class="ansi-yellow-bg">func_library_2</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">c</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">     11</span> <span style="font-weight:bold;color:rgb(0,135,0)">return</span> b <span style="color:rgb(98,98,98)">+</span> y

Cell <span class="ansi-green-fg ansi-bold">In[129], line 3</span>, in <span class="ansi-cyan-fg">func_library_2</span><span class="ansi-blue-fg ansi-bold">(c)</span>
<span class="ansi-green-fg">      1</span> <span style="font-weight:bold;color:rgb(0,135,0)">def</span> <span style="color:rgb(0,0,255)">func_library_2</span>(c):
<span class="ansi-green-fg">      2</span>     <span style="font-weight:bold;color:rgb(0,135,0)">if</span> <span style="color:rgb(0,135,0)">len</span>(c) <span style="color:rgb(98,98,98)">==</span> <span style="color:rgb(98,98,98)">0</span>:
<span class="ansi-green-fg ansi-bold">----&gt; 3</span>         <span style="font-weight:bold;color:rgb(0,135,0)">raise</span> <span style="font-weight:bold;color:rgb(215,95,95)">ValueError</span>(<span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">Empty input</span><span style="color:rgb(175,0,0)">"</span>)
<span class="ansi-green-fg">      4</span>     z <span style="color:rgb(98,98,98)">=</span> c
<span class="ansi-green-fg">      5</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> z

<span class="ansi-red-fg ansi-bold">ValueError</span>: Empty input</pre>
</div>
</div>
</div>
<p>لنقرأ رسالة الخطأ. تقول: <code>"ValueError: Empty input"</code>. حسنًا، ما الذي تسبب في ذلك؟ دعونا نلقي نظرة على سلسلة النداءات (stack trace) من الأعلى (للعثور على دوالنا الخاصة). نجد:</p>
<pre><code>File c:\Users\thund\OneDrive\3-Teach\DS-AI\2. Py\book\11_errors.qmd:17
     14     x = func_library_1(b, c)
     15     return a + x
---&gt; 17 func_app('a', 'b', '')</code></pre>
<p>هي أول استدعاء في سلسلة السببية. لنقرأ ماذا يأتي بعدها:</p>
<pre><code>File c:\Users\thund\OneDrive\3-Teach\DS-AI\2. Py\book\11_errors.qmd:14
     13 def func_app(a, b, c):
---&gt; 14     x = func_library_1(b, c)
     15     return a + x</code></pre>
<p>الآن هذه هي الاستدعاء الثاني، والأخير في تطبيقنا. بعد هذه النقطة، يكون خارج نطاق سيطرتنا. بما أننا نحافظ على كودنا الخاص <code>func_app</code>، فمن الأرجح أننا ارتكبنا الخطأ. يمكننا إصلاحه عن طريق التحقق من الإدخال قبل أن يغادر كودنا إلى <code>func_library_1</code>.</p>
<div id="b537d52f" class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1"></a>func_app(<span class="st">'a'</span>, <span class="st">'b'</span>, <span class="st">'c'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="130">
<pre><code>'abc'</code></pre>
</div>
</div>
<p>تم الإصلاح. انتهى.</p>
<p>إذا كان الخطأ في الواقع في <code>func_library_1</code>، فعلينا التواصل مع القائمين على صيانة المكتبة لإصلاحه. ربما يمكننا إصلاحه بأنفسنا وتقديم طلب سحب (pull request) على GitHub. هكذا تتحسن البرمجيات مفتوحة المصدر.</p>
</section>
</section>
<section id="الأخطاء-المنطقية" class="level2" data-number="14.5">
<h2 data-number="14.5" class="anchored" data-anchor-id="الأخطاء-المنطقية"><span class="header-section-number">14.5</span> الأخطاء المنطقية</h2>
<p>الأخطاء المنطقية صامتة. لا يتم اكتشافها بواسطة المترجم، ومع ذلك تتسبب في تصرف البرنامج بشكل غير صحيح. الأخطاء المنطقية هي الأصعب في العثور عليها وإصلاحها لأنها ليست واضحة دائمًا. يمكن أن تكون ناجمة عن:</p>
<ul>
<li>افتراضات غير صحيحة</li>
<li>تطبيق غير صحيح للخوارزمية أو</li>
<li>تحضير غير صحيح للبيانات</li>
</ul>
<section id="استخدام-الإجراء-الخاطئ" class="level3">
<h3 class="anchored" data-anchor-id="استخدام-الإجراء-الخاطئ">استخدام الإجراء الخاطئ</h3>
<div id="a3c44d2c" class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1"></a><span class="im">import</span> math</span>
<span id="cb26-2"><a href="#cb26-2"></a></span>
<span id="cb26-3"><a href="#cb26-3"></a>square <span class="op">=</span> math.sqrt(<span class="dv">4</span>) <span class="co"># should use math.pow(4, 2) instead</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="استعمال-العامل-الخاطئ" class="level3">
<h3 class="anchored" data-anchor-id="استعمال-العامل-الخاطئ">استعمال العامل الخاطئ</h3>
<div id="9f8d1e12" class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1"></a>x <span class="op">=</span> <span class="dv">16</span></span>
<span id="cb27-2"><a href="#cb27-2"></a><span class="cf">if</span> (x <span class="op">==</span> <span class="st">"16"</span>):</span>
<span id="cb27-3"><a href="#cb27-3"></a>    <span class="bu">print</span>(<span class="st">'equal'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="مستوى-محاذاة-خاطئ" class="level3">
<h3 class="anchored" data-anchor-id="مستوى-محاذاة-خاطئ">مستوى محاذاة خاطئ</h3>
<p>هنا كانت النية تقتضي أن تكون <code>print(j)</code> داخل الحلقة الداخلية:</p>
<div id="bae348f9" class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">2</span>):</span>
<span id="cb28-2"><a href="#cb28-2"></a>    <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">3</span>):</span>
<span id="cb28-3"><a href="#cb28-3"></a>        <span class="bu">print</span>(i)  </span>
<span id="cb28-4"><a href="#cb28-4"></a>    <span class="bu">print</span>(j)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0
0
0
2
1
1
1
2</code></pre>
</div>
</div>
</section>
<section id="خطأ-الحافة-off-by-one-error" class="level3">
<h3 class="anchored" data-anchor-id="خطأ-الحافة-off-by-one-error">خطأ الحافَّة (Off-by-one error)</h3>
<p>يكاد يكون أشهر الأخطاء في البرمجة: خطأ الحافَّة.</p>
<p>نشرحه بمثال: النية هنا هي طباعة الأرقام من 5 إلى 0 بما في ذلك 0، ولكن الحلقة تتوقف عند 1.</p>
<div id="5c45220b" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">5</span>, <span class="dv">0</span>, <span class="op">-</span><span class="dv">1</span>):</span>
<span id="cb30-2"><a href="#cb30-2"></a>    <span class="bu">print</span>(i)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>5
4
3
2
1</code></pre>
</div>
</div>
</section>
</section>
<section id="كيفية-حل-الأخطاء-المنطقية" class="level2" data-number="14.6">
<h2 data-number="14.6" class="anchored" data-anchor-id="كيفية-حل-الأخطاء-المنطقية"><span class="header-section-number">14.6</span> كيفية حل الأخطاء المنطقية؟</h2>
<p>قد تستعين بعبارة <code>assert</code> هنا وهناك للتحقق من منطق الكود، أو تنتقل <strong>لكتابة مجموعة اختبارات</strong> أكبر. سيأتيي الكلام عن <a href="zz_testing.qmd">كتابة الاختبارات</a>.</p>
<p><strong>التتبع</strong>. أفضل طريقة لحل الأخطاء المنطقية هي تنفيذ الكود والنظر في الناتج، وتتبع المنطق مرة أخرى إلى الكود سطرًا بسطر. يمكنك استخدام عبارات الطباعة <code>print</code> لتصحيح الأخطاء وفهم تدفق البرنامج.</p>
<p><strong>مراجعة الأقران</strong>: بحيث يطلع على الكود شخص آخر، فإنه قد يرى منه ما لم تر.</p>
</section>
<section id="المراجع" class="level2" data-number="14.7">
<h2 data-number="14.7" class="anchored" data-anchor-id="المراجع"><span class="header-section-number">14.7</span> المراجع</h2>
<ul>
<li>https://docs.python.org/3.13/tutorial/errors.html</li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./12_serialization.html" class="pagination-link" aria-label="حفظ البيانات">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">حفظ البيانات</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./14_classes.html" class="pagination-link" aria-label="الأصناف">
        <span class="nav-page-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">الأصناف</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>